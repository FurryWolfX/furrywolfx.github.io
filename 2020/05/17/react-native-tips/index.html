<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React Native å¼€å‘ç¬”è®°ï¼ˆé•¿æœŸæ›´æ–°ï¼‰ | Legend Of WolfX</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.png">
    <script src="/warning.js"></script>
    <meta name="description" content="
å•ç‹¬å¯åŠ¨ android studio æ¨¡æ‹Ÿå™¨(Linux)

./emulator -netdelay none -netspeed full -avd Nexus5XAPI_25

æ–‡å­—è¿‡é•¿éšè—çš„é—®é¢˜

CSS3 ä¸­å¤§å®¶å¯èƒ½éƒ½ä¼šç”¨åˆ° text-oveflowï¼Œç„¶è€Œ RN çš„ Text å¹¶æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® numberOfLIne æˆ– ...">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    
    <link rel="preload" href="/assets/css/0.styles.bc3aed26.css" as="style"><link rel="preload" href="/assets/js/app.1da0bb69.js" as="script"><link rel="preload" href="/assets/js/14.55e4c550.js" as="script"><link rel="preload" href="/assets/js/7.84f6b2a8.js" as="script"><link rel="preload" href="/assets/js/66.9784539a.js" as="script"><link rel="prefetch" href="/assets/js/10.5705640b.js"><link rel="prefetch" href="/assets/js/100.2d4d9e7d.js"><link rel="prefetch" href="/assets/js/101.f63a89bb.js"><link rel="prefetch" href="/assets/js/102.c939cad6.js"><link rel="prefetch" href="/assets/js/103.e87a1952.js"><link rel="prefetch" href="/assets/js/104.e613c484.js"><link rel="prefetch" href="/assets/js/105.13322646.js"><link rel="prefetch" href="/assets/js/106.0b5207e5.js"><link rel="prefetch" href="/assets/js/107.a1c332ed.js"><link rel="prefetch" href="/assets/js/108.c414da2f.js"><link rel="prefetch" href="/assets/js/109.8f83e939.js"><link rel="prefetch" href="/assets/js/11.45b718df.js"><link rel="prefetch" href="/assets/js/110.6e8b7546.js"><link rel="prefetch" href="/assets/js/111.47ddfaea.js"><link rel="prefetch" href="/assets/js/112.b43fd0a3.js"><link rel="prefetch" href="/assets/js/113.adfb2c3f.js"><link rel="prefetch" href="/assets/js/114.ceb439a8.js"><link rel="prefetch" href="/assets/js/115.7338874a.js"><link rel="prefetch" href="/assets/js/116.084363c7.js"><link rel="prefetch" href="/assets/js/117.c479ea70.js"><link rel="prefetch" href="/assets/js/118.740418fa.js"><link rel="prefetch" href="/assets/js/119.7977d3a4.js"><link rel="prefetch" href="/assets/js/12.52e6b565.js"><link rel="prefetch" href="/assets/js/120.bf8a6cc1.js"><link rel="prefetch" href="/assets/js/121.7f4e2649.js"><link rel="prefetch" href="/assets/js/122.892416f9.js"><link rel="prefetch" href="/assets/js/123.6f659ecf.js"><link rel="prefetch" href="/assets/js/124.e73898a1.js"><link rel="prefetch" href="/assets/js/125.c883bf63.js"><link rel="prefetch" href="/assets/js/126.eaf1e632.js"><link rel="prefetch" href="/assets/js/127.c3383c38.js"><link rel="prefetch" href="/assets/js/128.09c5fd68.js"><link rel="prefetch" href="/assets/js/129.5da002f2.js"><link rel="prefetch" href="/assets/js/13.2d8ff702.js"><link rel="prefetch" href="/assets/js/130.009adfbc.js"><link rel="prefetch" href="/assets/js/131.ed2e07f2.js"><link rel="prefetch" href="/assets/js/132.85c71e26.js"><link rel="prefetch" href="/assets/js/133.6bf319f6.js"><link rel="prefetch" href="/assets/js/134.91dadb77.js"><link rel="prefetch" href="/assets/js/135.5ced86b0.js"><link rel="prefetch" href="/assets/js/136.d1943bf5.js"><link rel="prefetch" href="/assets/js/137.d712710c.js"><link rel="prefetch" href="/assets/js/138.8621c889.js"><link rel="prefetch" href="/assets/js/139.7c6e757e.js"><link rel="prefetch" href="/assets/js/140.713b765b.js"><link rel="prefetch" href="/assets/js/141.b8426937.js"><link rel="prefetch" href="/assets/js/142.4140c467.js"><link rel="prefetch" href="/assets/js/143.5720dd6a.js"><link rel="prefetch" href="/assets/js/144.5b2afd9d.js"><link rel="prefetch" href="/assets/js/145.fab879c4.js"><link rel="prefetch" href="/assets/js/146.e518355c.js"><link rel="prefetch" href="/assets/js/147.aca6d356.js"><link rel="prefetch" href="/assets/js/148.9a7784e5.js"><link rel="prefetch" href="/assets/js/149.47385d5b.js"><link rel="prefetch" href="/assets/js/15.cbf6ad4a.js"><link rel="prefetch" href="/assets/js/150.59354d20.js"><link rel="prefetch" href="/assets/js/151.160dfb19.js"><link rel="prefetch" href="/assets/js/152.3468e19f.js"><link rel="prefetch" href="/assets/js/153.b4b91d42.js"><link rel="prefetch" href="/assets/js/154.7a92a4cd.js"><link rel="prefetch" href="/assets/js/155.504e7237.js"><link rel="prefetch" href="/assets/js/156.4b2fd82d.js"><link rel="prefetch" href="/assets/js/157.e0c1fce1.js"><link rel="prefetch" href="/assets/js/158.e9e96399.js"><link rel="prefetch" href="/assets/js/159.a828861d.js"><link rel="prefetch" href="/assets/js/16.14d57789.js"><link rel="prefetch" href="/assets/js/160.f9a3384b.js"><link rel="prefetch" href="/assets/js/161.3db0d003.js"><link rel="prefetch" href="/assets/js/162.4adb9cd5.js"><link rel="prefetch" href="/assets/js/163.4e497f08.js"><link rel="prefetch" href="/assets/js/164.61857252.js"><link rel="prefetch" href="/assets/js/165.607930a2.js"><link rel="prefetch" href="/assets/js/166.94ac84d2.js"><link rel="prefetch" href="/assets/js/167.5a2af554.js"><link rel="prefetch" href="/assets/js/168.c72baabc.js"><link rel="prefetch" href="/assets/js/169.a6afeb03.js"><link rel="prefetch" href="/assets/js/17.747906fb.js"><link rel="prefetch" href="/assets/js/170.1cec3ae7.js"><link rel="prefetch" href="/assets/js/171.f61f0bc5.js"><link rel="prefetch" href="/assets/js/172.38588344.js"><link rel="prefetch" href="/assets/js/173.4d97e8fd.js"><link rel="prefetch" href="/assets/js/174.0537bcc9.js"><link rel="prefetch" href="/assets/js/175.465e29e0.js"><link rel="prefetch" href="/assets/js/176.9d386c25.js"><link rel="prefetch" href="/assets/js/177.dbe53764.js"><link rel="prefetch" href="/assets/js/178.b2883b56.js"><link rel="prefetch" href="/assets/js/179.acb4961f.js"><link rel="prefetch" href="/assets/js/18.40a8d0d2.js"><link rel="prefetch" href="/assets/js/180.aaad2c2c.js"><link rel="prefetch" href="/assets/js/181.439040e4.js"><link rel="prefetch" href="/assets/js/182.85f38b4d.js"><link rel="prefetch" href="/assets/js/183.593806cf.js"><link rel="prefetch" href="/assets/js/184.42bc8c2f.js"><link rel="prefetch" href="/assets/js/185.9606126b.js"><link rel="prefetch" href="/assets/js/186.8ac37809.js"><link rel="prefetch" href="/assets/js/187.aadb7ee1.js"><link rel="prefetch" href="/assets/js/188.0e551305.js"><link rel="prefetch" href="/assets/js/189.efde0ed0.js"><link rel="prefetch" href="/assets/js/19.323323fe.js"><link rel="prefetch" href="/assets/js/190.eb299bed.js"><link rel="prefetch" href="/assets/js/191.c7155e3f.js"><link rel="prefetch" href="/assets/js/192.47ea9532.js"><link rel="prefetch" href="/assets/js/193.dd76fbb7.js"><link rel="prefetch" href="/assets/js/194.268b45ff.js"><link rel="prefetch" href="/assets/js/195.3b4859d3.js"><link rel="prefetch" href="/assets/js/196.bbf544cb.js"><link rel="prefetch" href="/assets/js/197.9a206eea.js"><link rel="prefetch" href="/assets/js/198.3cda3f6b.js"><link rel="prefetch" href="/assets/js/199.914d8feb.js"><link rel="prefetch" href="/assets/js/20.01c11e5d.js"><link rel="prefetch" href="/assets/js/200.d48df64f.js"><link rel="prefetch" href="/assets/js/201.9e1cab4a.js"><link rel="prefetch" href="/assets/js/202.1078a481.js"><link rel="prefetch" href="/assets/js/203.afd69b72.js"><link rel="prefetch" href="/assets/js/204.c9678a25.js"><link rel="prefetch" href="/assets/js/205.1eb51746.js"><link rel="prefetch" href="/assets/js/206.0ad0944a.js"><link rel="prefetch" href="/assets/js/207.ea100082.js"><link rel="prefetch" href="/assets/js/208.faacb980.js"><link rel="prefetch" href="/assets/js/209.61c93638.js"><link rel="prefetch" href="/assets/js/21.6c532828.js"><link rel="prefetch" href="/assets/js/210.5beea1d1.js"><link rel="prefetch" href="/assets/js/211.b7e288c0.js"><link rel="prefetch" href="/assets/js/212.76f985ec.js"><link rel="prefetch" href="/assets/js/213.b3e0249c.js"><link rel="prefetch" href="/assets/js/214.95f23932.js"><link rel="prefetch" href="/assets/js/215.82d98623.js"><link rel="prefetch" href="/assets/js/216.af951190.js"><link rel="prefetch" href="/assets/js/217.20f0231b.js"><link rel="prefetch" href="/assets/js/218.3ccdc462.js"><link rel="prefetch" href="/assets/js/22.1038e00c.js"><link rel="prefetch" href="/assets/js/23.1c93cbb8.js"><link rel="prefetch" href="/assets/js/24.f6db29c9.js"><link rel="prefetch" href="/assets/js/25.c8af1a26.js"><link rel="prefetch" href="/assets/js/26.2671fe16.js"><link rel="prefetch" href="/assets/js/27.70790a29.js"><link rel="prefetch" href="/assets/js/28.16cb6531.js"><link rel="prefetch" href="/assets/js/29.a5667c90.js"><link rel="prefetch" href="/assets/js/3.004e578d.js"><link rel="prefetch" href="/assets/js/30.b2b4a71e.js"><link rel="prefetch" href="/assets/js/31.b98c1637.js"><link rel="prefetch" href="/assets/js/32.09fe6a62.js"><link rel="prefetch" href="/assets/js/33.b449fdc8.js"><link rel="prefetch" href="/assets/js/34.caabbdde.js"><link rel="prefetch" href="/assets/js/35.2fc3469f.js"><link rel="prefetch" href="/assets/js/36.c32f595b.js"><link rel="prefetch" href="/assets/js/37.5336f1f2.js"><link rel="prefetch" href="/assets/js/38.5f6134ef.js"><link rel="prefetch" href="/assets/js/39.1fa405e9.js"><link rel="prefetch" href="/assets/js/4.983e1af9.js"><link rel="prefetch" href="/assets/js/40.01e58999.js"><link rel="prefetch" href="/assets/js/41.87ee5a6e.js"><link rel="prefetch" href="/assets/js/42.dc0bc6ff.js"><link rel="prefetch" href="/assets/js/43.8afe1fbd.js"><link rel="prefetch" href="/assets/js/44.dd42bcb3.js"><link rel="prefetch" href="/assets/js/45.89bec802.js"><link rel="prefetch" href="/assets/js/46.d89df8af.js"><link rel="prefetch" href="/assets/js/47.252b6136.js"><link rel="prefetch" href="/assets/js/48.9d1bb3b5.js"><link rel="prefetch" href="/assets/js/49.903ae125.js"><link rel="prefetch" href="/assets/js/5.01b03d8b.js"><link rel="prefetch" href="/assets/js/50.df4d83a9.js"><link rel="prefetch" href="/assets/js/51.da553037.js"><link rel="prefetch" href="/assets/js/52.a2461360.js"><link rel="prefetch" href="/assets/js/53.9fb017ae.js"><link rel="prefetch" href="/assets/js/54.d14f55cf.js"><link rel="prefetch" href="/assets/js/55.f0d0480c.js"><link rel="prefetch" href="/assets/js/56.2e8e0123.js"><link rel="prefetch" href="/assets/js/57.652cb71c.js"><link rel="prefetch" href="/assets/js/58.84152000.js"><link rel="prefetch" href="/assets/js/59.9bdbe8f7.js"><link rel="prefetch" href="/assets/js/6.17f05b35.js"><link rel="prefetch" href="/assets/js/60.b6dab2bd.js"><link rel="prefetch" href="/assets/js/61.a534cf3d.js"><link rel="prefetch" href="/assets/js/62.136519bc.js"><link rel="prefetch" href="/assets/js/63.e90ff090.js"><link rel="prefetch" href="/assets/js/64.8cd98701.js"><link rel="prefetch" href="/assets/js/65.c2884dbc.js"><link rel="prefetch" href="/assets/js/67.77c03cd9.js"><link rel="prefetch" href="/assets/js/68.4c2cc0fb.js"><link rel="prefetch" href="/assets/js/69.f69635d4.js"><link rel="prefetch" href="/assets/js/70.d710e533.js"><link rel="prefetch" href="/assets/js/71.4ae26767.js"><link rel="prefetch" href="/assets/js/72.cf9fed14.js"><link rel="prefetch" href="/assets/js/73.c2cf15b4.js"><link rel="prefetch" href="/assets/js/74.64eade6c.js"><link rel="prefetch" href="/assets/js/75.ce36f4ae.js"><link rel="prefetch" href="/assets/js/76.2a33c53b.js"><link rel="prefetch" href="/assets/js/77.30598a8c.js"><link rel="prefetch" href="/assets/js/78.13ea9b24.js"><link rel="prefetch" href="/assets/js/79.513e9542.js"><link rel="prefetch" href="/assets/js/8.391bc43b.js"><link rel="prefetch" href="/assets/js/80.24a46d34.js"><link rel="prefetch" href="/assets/js/81.d501b813.js"><link rel="prefetch" href="/assets/js/82.f77baa5a.js"><link rel="prefetch" href="/assets/js/83.91e67b27.js"><link rel="prefetch" href="/assets/js/84.ba3475bb.js"><link rel="prefetch" href="/assets/js/85.e8257972.js"><link rel="prefetch" href="/assets/js/86.5c268be9.js"><link rel="prefetch" href="/assets/js/87.a14bfa50.js"><link rel="prefetch" href="/assets/js/88.8351780b.js"><link rel="prefetch" href="/assets/js/89.b80410f1.js"><link rel="prefetch" href="/assets/js/9.e55936b5.js"><link rel="prefetch" href="/assets/js/90.e4767763.js"><link rel="prefetch" href="/assets/js/91.4c365bab.js"><link rel="prefetch" href="/assets/js/92.16884dfa.js"><link rel="prefetch" href="/assets/js/93.11b1a584.js"><link rel="prefetch" href="/assets/js/94.a60282fc.js"><link rel="prefetch" href="/assets/js/95.b04abb7d.js"><link rel="prefetch" href="/assets/js/96.66e176dd.js"><link rel="prefetch" href="/assets/js/97.f8b0eadc.js"><link rel="prefetch" href="/assets/js/98.4bb86b04.js"><link rel="prefetch" href="/assets/js/99.7d438189.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.0d3d3514.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bc3aed26.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link"><span class="site-title" data-v-2a8e05ba>Legend Of WolfX</span></a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">
              Blog
            </a></li><li class="nav-item"><a href="/tag/" class="nav-link">
              Tags
            </a></li><li class="nav-item"><a href="/about/" class="nav-link">
              About
            </a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">Legend Of WolfX </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="mobile-nav-item"><a href="/about/" class="nav-link">About</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        React Native å¼€å‘ç¬”è®°ï¼ˆé•¿æœŸæ›´æ–°ï¼‰
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2020-05-17T14:45:00.000Z">
      2020-05-17
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-25dfc3b6><a href="/tag/React-Native" data-v-25dfc3b6> React-Native </a></li><li class="post-tag" data-v-25dfc3b6><a href="/tag/JavaScript" data-v-25dfc3b6> JavaScript </a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h1 id="rn-æŠ€å·§"><a href="#rn-æŠ€å·§" class="header-anchor">#</a> RN æŠ€å·§</h1> <h2 id="å•ç‹¬å¯åŠ¨-android-studio-æ¨¡æ‹Ÿå™¨-linux"><a href="#å•ç‹¬å¯åŠ¨-android-studio-æ¨¡æ‹Ÿå™¨-linux" class="header-anchor">#</a> å•ç‹¬å¯åŠ¨ android studio æ¨¡æ‹Ÿå™¨(Linux)</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>./emulator -netdelay none -netspeed full -avd Nexus_5X_API_25
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="æ–‡å­—è¿‡é•¿éšè—çš„é—®é¢˜"><a href="#æ–‡å­—è¿‡é•¿éšè—çš„é—®é¢˜" class="header-anchor">#</a> æ–‡å­—è¿‡é•¿éšè—çš„é—®é¢˜</h2> <p>CSS3 ä¸­å¤§å®¶å¯èƒ½éƒ½ä¼šç”¨åˆ° text-oveflowï¼Œç„¶è€Œ RN çš„ Text å¹¶æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® numberOfLIne æˆ–è€… JS è‡ªåŠ¨è®¡ç®—æ¥å®ç°ï¼š</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span> <span class="token attr-name">numberOfLines</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">your long text here</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="è·å–çª—ä½“å¤§å°"><a href="#è·å–çª—ä½“å¤§å°" class="header-anchor">#</a> è·å–çª—ä½“å¤§å°</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Dimensions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-native&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  ScreenWidth<span class="token operator">:</span> Dimensions<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;window&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">,</span> <span class="token comment">// æ³¨æ„ï¼Œå¦‚æœè¿™é‡Œçš„å‚æ•°ä¼ é€’&quot;screen&quot;ï¼Œä¼šå°†é¡¶éƒ¨å’Œåº•éƒ¨è™šæ‹ŸæŒ‰é”®çš„é«˜ä¹Ÿç®—è¿›å»ã€‚</span>
  ScreenHeight<span class="token operator">:</span> Dimensions<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;window&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>height<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="å…³äºç›¸å¯¹å•ä½"><a href="#å…³äºç›¸å¯¹å•ä½" class="header-anchor">#</a> å…³äºç›¸å¯¹å•ä½</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// æ¨¡ä»¿ web ç«¯çš„ VWï¼ŒVHï¼Œrem</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  ScreenWidth<span class="token operator">:</span> Dimensions<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;window&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">,</span>
  ScreenHeight<span class="token operator">:</span> Dimensions<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;window&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>height<span class="token punctuation">,</span>
  <span class="token function-variable function">VW</span><span class="token operator">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>Dimensions<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;window&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">*</span> value<span class="token punctuation">,</span>
  <span class="token function-variable function">VH</span><span class="token operator">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>Dimensions<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;window&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">*</span> value<span class="token punctuation">,</span>
  <span class="token function-variable function">rem</span><span class="token operator">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>Dimensions<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;window&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">750</span><span class="token punctuation">)</span> <span class="token operator">*</span> value<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="é˜´å½±æ•ˆæœ"><a href="#é˜´å½±æ•ˆæœ" class="header-anchor">#</a> é˜´å½±æ•ˆæœ</h2> <p>android å’Œ ios çš„é˜´å½±è®¾ç½®ä¸ä¸€æ ·ï¼Œios å¯ä»¥ä½¿ç”¨ shadow æ¥ç›´æ¥è®¾ç½®ï¼Œandroid åˆ™éœ€è¦ç”¨ elevation æ¥è®¾ç½®ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> styles <span class="token operator">=</span> <span class="token punctuation">{</span>
  container<span class="token operator">:</span> <span class="token punctuation">{</span>
    backgroundColor<span class="token operator">:</span> <span class="token string">&quot;#fff&quot;</span><span class="token punctuation">,</span>
    shadowColor<span class="token operator">:</span> <span class="token string">&quot;#000&quot;</span><span class="token punctuation">,</span>
    shadowOffset<span class="token operator">:</span> <span class="token punctuation">{</span> h<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> w<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    shadowRadius<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    shadowOpacity<span class="token operator">:</span> <span class="token number">0.3</span><span class="token punctuation">,</span>
    elevation<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token comment">// å®‰å“è‡ªå¸¦çš„é˜´å½±</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="ç»„ä»¶é€šä¿¡"><a href="#ç»„ä»¶é€šä¿¡" class="header-anchor">#</a> ç»„ä»¶é€šä¿¡</h2> <p>å¦‚æœæ˜¯æ™®é€šçš„ç»„ä»¶é€šä¿¡å¯ä»¥ç”¨ props è§£å†³ï¼Œä½†å¦‚æœæ˜¯ react-navigation ç­‰ç®¡ç†çš„ç»„ä»¶ï¼Œè¿™æ‹›å°±ä¸å¤ªå¥½ç”¨äº†ï¼Œæ¯”å¦‚è¿”å›æ—¶è§¦å‘åˆ·æ–°é¡µé¢ç­‰ç­‰ã€‚</p> <p>è§£å†³æ–¹æ¡ˆæœ‰ 2 ç§ï¼š</p> <p>ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨å…±äº«çš„çŠ¶æ€ï¼Œå³ redux è¿™ç±»æ¡†æ¶å»ç®¡ç†çŠ¶æ€ï¼Œè¿™æ ·çŠ¶æ€å’Œè§†å›¾æ˜¯ä¿æŒåŒæ­¥çš„ï¼Œä¸éœ€è¦å»å‘ŠçŸ¥é¡µé¢éœ€è¦åˆ·æ–°ã€‚redux çš„ä½¿ç”¨æ–¹å¼è¿™é‡Œä¸å†é˜è¿°ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘ä¹‹å‰å†™çš„åšæ–‡ã€‚</p> <p>ç¬¬äºŒç§æ˜¯ä½¿ç”¨ RN ä¸­çš„ DeviceEventEmitter</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è®¢é˜…äº‹ä»¶</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>subscription <span class="token operator">=</span> DeviceEventEmitter<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token string">&quot;reloadList&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ç§»å‡º</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>subscription<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// å‘å°„äº‹ä»¶</span>
DeviceEventEmitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;reloadList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="ä¸Šä¼ æ–‡ä»¶"><a href="#ä¸Šä¼ æ–‡ä»¶" class="header-anchor">#</a> ä¸Šä¼ æ–‡ä»¶</h2> <p>ä»¥ä¸Šä¼ å›¾ç‰‡ä¸ºä¾‹ï¼š</p> <p>ä½¿ç”¨ RN ä¸­è‡ªå¸¦çš„ fetch æ–¹æ³•å®ç°</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">uploadImage</span><span class="token punctuation">(</span><span class="token parameter">imgAry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> imgAry<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> file <span class="token operator">=</span> <span class="token punctuation">{</span> uri<span class="token operator">:</span> imgAry<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&quot;multipart/form-data&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;image.jpg&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™é‡Œçš„ files å°±æ˜¯åå°éœ€è¦çš„ key</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å¼€å§‹ä¸Šä¼ å›¾ç‰‡&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>server <span class="token operator">+</span> <span class="token string">&quot;/common/uploadFile.do&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;multipart/form-data&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> formData<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="æ‹¨æ‰“ç”µè¯"><a href="#æ‹¨æ‰“ç”µè¯" class="header-anchor">#</a> æ‹¨æ‰“ç”µè¯</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Linking <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-native&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">callMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Linking<span class="token punctuation">.</span><span class="token function">openURL</span><span class="token punctuation">(</span><span class="token string">&quot;tel:10086&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="å¯Œæ–‡æœ¬æ•ˆæœ"><a href="#å¯Œæ–‡æœ¬æ•ˆæœ" class="header-anchor">#</a> å¯Œæ–‡æœ¬æ•ˆæœ</h2> <p>RN çš„<code>Text</code>ç»„ä»¶ é»˜è®¤æ²¡æœ‰æä¾›å®ç°å¯Œæ–‡æœ¬æ•ˆæœçš„å±æ€§</p> <p>æ•ˆæœå›¾:</p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/17255639-324e-454a-86ff-fd0c2e9a512a.png" alt="1.png"></p> <p>ä¸€å¼€å§‹æƒ³é€šè¿‡å¸ƒå±€æ ·å¼å®ç°ä¸Šå›¾æ•ˆæœï¼Œä½†å‘ç°ä¸è¡Œ</p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/5a3eac44-e723-478b-96ae-ba1baaa95655.png" alt="2.png"></p> <p>æœ€åé€šè¿‡å¤šä¸ª<code>Text</code>ç»„ä»¶æ¥å®ç°</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> lineHeight<span class="token operator">:</span> <span class="token number">16</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fontSize<span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token string">&quot;æ¸©é¦¨æç¤º:  &quot;</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span>
    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
      fontSize<span class="token operator">:</span> Unity<span class="token punctuation">.</span>SmallFont<span class="token punctuation">,</span>
      marginLeft<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> Unity<span class="token punctuation">.</span>DetailColor<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span><span class="token string">&quot;ä½ å¯ä»¥å¯¹å¸–å­çš„ç›¸å…³é—®é¢˜è¿›è¡Œæé—®ï¼Œå•†å®¶ä¼šç¬¬ä¸€æ—¶é—´å›ç­”æ‚¨çš„é—®é¢˜!ä½ çš„å’¨è¯¢&quot;</span> <span class="token operator">+</span>
      <span class="token string">&quot;å¯èƒ½ä¼šåœ¨ä¸Šæ–¹å±•ç¤ºä¾›å…¶ä»–ç½‘å‹å‚è€ƒ,ç™»å½•åå’¨è¯¢ä½ å¯åœ¨ä¸ªäººä¸­å¿ƒ-æ¶ˆæ¯æé†’ä¸­åŠæ—¶æŸ¥çœ‹å•†å®¶&quot;</span> <span class="token operator">+</span>
      <span class="token string">&quot;çš„å›å¤ã€‚&quot;</span><span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="åœ¨ä½¿ç”¨-flatlist-ç»„ä»¶æ—¶-å¦‚æœæ•°æ®æºæ˜¯å¯¹è±¡æ—¶-æ›´æ–°æ•°æ®æºæ•°ç»„é‡ŒæŸé¡¹çš„æŸä¸ªå­—æ®µçš„å€¼æ—¶-é¡µé¢-ui-ä¸è¿›è¡Œæ›´æ–°ã€‚"><a href="#åœ¨ä½¿ç”¨-flatlist-ç»„ä»¶æ—¶-å¦‚æœæ•°æ®æºæ˜¯å¯¹è±¡æ—¶-æ›´æ–°æ•°æ®æºæ•°ç»„é‡ŒæŸé¡¹çš„æŸä¸ªå­—æ®µçš„å€¼æ—¶-é¡µé¢-ui-ä¸è¿›è¡Œæ›´æ–°ã€‚" class="header-anchor">#</a> åœ¨ä½¿ç”¨<code>&lt;FlatList /&gt;</code>ç»„ä»¶æ—¶ï¼Œå¦‚æœæ•°æ®æºæ˜¯å¯¹è±¡æ—¶ï¼Œæ›´æ–°æ•°æ®æºæ•°ç»„é‡ŒæŸé¡¹çš„æŸä¸ªå­—æ®µçš„å€¼æ—¶ï¼Œé¡µé¢ UI ä¸è¿›è¡Œæ›´æ–°ã€‚</h2> <p>éœ€è¦ç»™<code>&lt;FlatList /&gt;</code>ç»„ä»¶æŒ‡å®š æ•°æ®æº</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token operator">&lt;</span>FlatList
  extraData<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">}</span> <span class="token comment">// æŒ‡å®š æ•°æ®æº</span>
  keyExtractor<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> index<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
  data<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataList<span class="token punctuation">}</span>
  renderItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ListItem</span></span> <span class="token attr-name">data</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span> <span class="token attr-name">cellClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cellClick</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æˆ–è€…åœ¨å¯¹æ•°æ®æºè¿›è¡Œ<code>setState</code>æ“ä½œæ—¶ï¼Œè¿›è¡Œæ·±å¤åˆ¶ä¹Ÿå¯ä»¥è§£å†³</p> <h2 id="ios-ç³»ç»Ÿ-webview-åœ¨åº•éƒ¨æ¸²æŸ“æ„å¤–å‡ºç°é»‘è‰²è¾¹æ¡†"><a href="#ios-ç³»ç»Ÿ-webview-åœ¨åº•éƒ¨æ¸²æŸ“æ„å¤–å‡ºç°é»‘è‰²è¾¹æ¡†" class="header-anchor">#</a> ios ç³»ç»Ÿ WebView åœ¨åº•éƒ¨æ¸²æŸ“æ„å¤–å‡ºç°é»‘è‰²è¾¹æ¡†</h2> <p>å°† WebView çš„ backgroundColor è®¾ç½®ä¸ºé€æ˜å³å¯</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Webview</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>backgroundColor<span class="token operator">:</span> <span class="token string">'transparent'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token attr-name">...</span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h1 id="rn-bug"><a href="#rn-bug" class="header-anchor">#</a> RN Bug</h1> <h2 id="android-é”®ç›˜é¡¶èµ·åº•éƒ¨å¯¼èˆªçš„é—®é¢˜"><a href="#android-é”®ç›˜é¡¶èµ·åº•éƒ¨å¯¼èˆªçš„é—®é¢˜" class="header-anchor">#</a> Android é”®ç›˜é¡¶èµ·åº•éƒ¨å¯¼èˆªçš„é—®é¢˜</h2> <p>è§£å†³æ–¹æ¡ˆï¼š æ‰“å¼€ android å·¥ç¨‹ï¼Œåœ¨ <code>AndroidManifest.xml</code> ä¸­é…ç½®å¦‚ä¸‹ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span>
    <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.MainActivity<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@string/app_name<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>launchMode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>singleTask<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>configChanges</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>keyboard|keyboardHidden|orientation|screenSize<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>windowSoftInputMode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stateAlwaysHidden|adjustPan<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.intent.action.MAIN<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.intent.category.LAUNCHER<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="ios12-beta-ç‰ˆé—ªé€€"><a href="#ios12-beta-ç‰ˆé—ªé€€" class="header-anchor">#</a> iOS12 beta ç‰ˆé—ªé€€</h2> <p>ï¼ˆä½¿ç”¨å‹ç›Ÿåˆ†äº« SDK6.8.0 å’Œç»Ÿè®¡ç‰ˆæœ¬ 5.4.0 æ—¶å¿…ç°çš„é—ªé€€ï¼‰</p> <p>é—ªé€€çš„åŸå› ï¼š</p> <p>å‹ç›Ÿçš„é‡å¤§ bug å¯¼è‡´ï¼Œåœ¨ä½¿ç”¨åˆ†äº« SDK6.8.0 å’Œç»Ÿè®¡ç‰ˆæœ¬ 5.4.0 è¿›è¡Œæ³¨å†Œå‹ç›Ÿ key çš„æ—¶å€™å¥”æºƒï¼Œå¿…ç°ã€‚</p> <p>ï¼ˆæ³¨é‡Šï¼šä½¿ç”¨ <code>[UMConfigure initWithAppkey:KH_UM_APP_ID channel:@&quot;App Store&quot;];</code> æ³¨å†Œå‹ç›Ÿ keyï¼Œè¿™æ˜¯ä¸€ä¸ªç»¼åˆæ³¨å†Œå‹ç›Ÿå¹³å°çš„ APIï¼‰</p> <p>å¥”æºƒä¿¡æ¯å¦‚ä¸‹ï¼š</p> <p><code>[&lt;UIStatusBarTimeItemView 0x101c29cd0&gt; valueForUndefinedKey:]: this class is not key value coding-compliant for the</code></p> <p>åŸå› æ˜¯ Xcode åœ¨ v10 ä¹‹ååˆå¹¶äº†ä¸€äº›åº•å±‚åº“æ–‡ä»¶ï¼Œå¯¼è‡´å‹ç›Ÿå´©æºƒï¼Œæ¨èçš„è§£å†³åŠæ³•æ˜¯å»å‹ç›Ÿå‡çº§ SDK</p> <p>å¯¹åº”çš„è§£ææ—¥å¿—å¦‚ä¸‹ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>UMInternalUtil getSysDateFormate<span class="token punctuation">]</span>

<span class="token punctuation">[</span>UMInternalUtil Value2<span class="token punctuation">]</span>

<span class="token punctuation">[</span>UMEnvelopeBuild buildInternalData<span class="token punctuation">]</span>

<span class="token punctuation">[</span>UMWorkDispatch dispatchEvent:inComponent:<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>è§£å†³åŠæ³•ï¼š</p> <p>ç¬¬ä¸€ç§ï¼šå‡çº§å‹ç›Ÿ SDK ä¸­çš„ UMCommon.framework, <a href="https://developer.umeng.com/sdk/ios" target="_blank" rel="noopener noreferrer">å‡çº§åœ°å€<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œ æ³¨:è®°å¾—ä¸‹è½½åŸç”Ÿæ¨¡å—ä¸‹çš„ä¾èµ–åŒ…ã€‚</p> <p>ç¬¬äºŒç§ï¼šé—å¼ƒå‹ç›Ÿ ğŸ˜„ğŸ˜„</p> <h2 id="è§¦æ‘¸ç»„ä»¶åœ¨-android-å’Œ-ios-è¡¨ç°ä¸ä¸€è‡´"><a href="#è§¦æ‘¸ç»„ä»¶åœ¨-android-å’Œ-ios-è¡¨ç°ä¸ä¸€è‡´" class="header-anchor">#</a> è§¦æ‘¸ç»„ä»¶åœ¨ Android å’Œ iOS è¡¨ç°ä¸ä¸€è‡´</h2> <p>åœ¨ Android ä¸Šè¡¨ç°ä¸ºè™šæ‹Ÿç»„ä»¶ï¼Œå³æœ€ç»ˆæ¸²æŸ“åä¸å­˜åœ¨ã€‚è€Œ iOS è¡¨ç°ä¸ºå®ä½“ç»„ä»¶ã€‚</p> <p>è§£å†³æ–¹å¼ï¼šå¯ä»¥åœ¨ Android ä¸ŠåµŒå¥—ä¸€ä¸ª Viewã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> View<span class="token punctuation">,</span> TouchableNativeFeedback<span class="token punctuation">,</span> TouchableOpacity<span class="token punctuation">,</span> Platform <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-native&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Touch</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Platform<span class="token punctuation">.</span><span class="token constant">OS</span> <span class="token operator">===</span> <span class="token string">&quot;ios&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TouchableOpacity</span></span> <span class="token attr-name">activeOpacity</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>style<span class="token punctuation">}</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onPress<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TouchableOpacity</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TouchableNativeFeedback</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onPress<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>style<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TouchableNativeFeedback</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="scrollview-çš„ä¸€äº›å‘"><a href="#scrollview-çš„ä¸€äº›å‘" class="header-anchor">#</a> ScrollView çš„ä¸€äº›å‘</h2> <p>ç¬¬ä¸€ä¸ªå‘ï¼šiOS ä¸Š ScrollView æ— æ³•ç›´æ¥æŒ‡å®šå°ºå¯¸ï¼Œå¿…é¡»è¦é€šè¿‡çˆ¶çº§ Viewã€‚ä½† Android ä¸Šæ²¡æœ‰æ­¤é—®é¢˜ã€‚</p> <p>ç¬¬äºŒä¸ªå‘ï¼šiOS é”®ç›˜å¼¹èµ·æ—¶çš„é®æŒ¡é—®é¢˜</p> <p>æ¨èä½¿ç”¨ç»„ä»¶ï¼š <code>react-native-keyboard-aware-scroll-view</code></p> <h2 id="å¡«å‘-onmessage-failing-when-there-are-js-warnings-and-errors-on-the-page"><a href="#å¡«å‘-onmessage-failing-when-there-are-js-warnings-and-errors-on-the-page" class="header-anchor">#</a> å¡«å‘ - onMessage failing when there are JS warnings and errors on the page</h2> <p>åœ¨æŸäº›ä½ç‰ˆæœ¬ RN ä¸Šä¼šå‡ºç°</p> <p>æ³¨å…¥ä¸€æ®µè¡¥ä¸ä»£ç ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> originalPostMessage <span class="token operator">=</span> window<span class="token punctuation">.</span>postMessage<span class="token punctuation">;</span>

  <span class="token keyword">var</span> <span class="token function-variable function">patchedPostMessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> targetOrigin<span class="token punctuation">,</span> transfer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">originalPostMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> targetOrigin<span class="token punctuation">,</span> transfer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  patchedPostMessage<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;hasOwnProperty&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;postMessage&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  window<span class="token punctuation">.</span>postMessage <span class="token operator">=</span> patchedPostMessage<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">patchPostMessageFunction</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> originalPostMessage <span class="token operator">=</span> window<span class="token punctuation">.</span>postMessage<span class="token punctuation">;</span>

  <span class="token keyword">var</span> <span class="token function-variable function">patchedPostMessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> targetOrigin<span class="token punctuation">,</span> transfer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">originalPostMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> targetOrigin<span class="token punctuation">,</span> transfer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  patchedPostMessage<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'hasOwnProperty'</span><span class="token punctuation">,</span> <span class="token string">'postMessage'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  window<span class="token punctuation">.</span>postMessage <span class="token operator">=</span> patchedPostMessage<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> patchPostMessageJsCode <span class="token operator">=</span> <span class="token string">'('</span> <span class="token operator">+</span> <span class="token function">String</span><span class="token punctuation">(</span>patchPostMessageFunction<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">')();'</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WebView</span></span> <span class="token attr-name">injectedJavaScript</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>patchPostMessageJsCode<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="borderstyle-dashed-åœ¨å®‰å“æ— æ•ˆçš„è§£å†³æ–¹æ¡ˆ"><a href="#borderstyle-dashed-åœ¨å®‰å“æ— æ•ˆçš„è§£å†³æ–¹æ¡ˆ" class="header-anchor">#</a> borderStyle: &quot;dashed&quot; åœ¨å®‰å“æ— æ•ˆçš„è§£å†³æ–¹æ¡ˆ</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{</span>
  frame<span class="token operator">:</span> <span class="token punctuation">{</span>
    borderWidth<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    borderStyle<span class="token operator">:</span> <span class="token string">&quot;dashed&quot;</span><span class="token punctuation">,</span> <span class="token comment">// è™šçº¿æ ·å¼å¯¹å®‰å“æ— æ•ˆ</span>
    borderColor<span class="token operator">:</span> <span class="token string">&quot;#dcdcdc&quot;</span><span class="token punctuation">,</span>
    height<span class="token operator">:</span> <span class="token number">160</span><span class="token punctuation">,</span>
    borderRadius<span class="token operator">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token comment">// åŠ äº† borderRadius è™šçº¿å°±æœ‰æ•ˆäº†ï¼Œ åŸå› æœªçŸ¥</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="æŸäº›-rn-ç‰ˆæœ¬çš„-textinput-åœ¨-ios-ä¸Šæ— æ³•è¾“å…¥ä¸­æ–‡çš„é—®é¢˜"><a href="#æŸäº›-rn-ç‰ˆæœ¬çš„-textinput-åœ¨-ios-ä¸Šæ— æ³•è¾“å…¥ä¸­æ–‡çš„é—®é¢˜" class="header-anchor">#</a> æŸäº› RN ç‰ˆæœ¬çš„ TextInput åœ¨ iOS ä¸Šæ— æ³•è¾“å…¥ä¸­æ–‡çš„é—®é¢˜</h2> <p>è§£å†³æ–¹å¼å¦‚ä¸‹ï¼Œé‡æ–°åŒ…è£… TextInputï¼š</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Platform<span class="token punctuation">,</span> TextInput <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-native&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyTextInput</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      Platform<span class="token punctuation">.</span><span class="token constant">OS</span> <span class="token operator">!==</span> <span class="token string">&quot;ios&quot;</span> <span class="token operator">||</span>
      <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>value <span class="token operator">===</span> nextProps<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>nextProps<span class="token punctuation">.</span>defaultValue<span class="token punctuation">)</span> <span class="token operator">||</span>
      <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>defaultValue <span class="token operator">===</span> nextProps<span class="token punctuation">.</span>defaultValue <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>nextProps<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TextInput</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">this</span><span class="token punctuation">.</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyTextInput<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>ä½†æ˜¯è¿™ä¸ªè§£å†³æ–¹æ¡ˆå­˜åœ¨å€¼æ— æ³•å›å¡«çš„ bugï¼Œå®˜æ–¹è§£å†³æ–¹æ¡ˆï¼ˆä¿®æ”¹åŸç”Ÿä»£ç ï¼‰ï¼š <a href="https://github.com/facebook/react-native/pull/18456/files?diff=split" target="_blank" rel="noopener noreferrer">https://github.com/facebook/react-native/pull/18456/files?diff=split<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="watch-enospc-linux"><a href="#watch-enospc-linux" class="header-anchor">#</a> watch ENOSPC (linux)</h2> <p>linux åœ¨å¯åŠ¨ <code>react-native start</code> åï¼Œè¿‡å‡ ç§’å°±ä¼šå‡ºç° <code>watch * * * * * * * * * * *ENOSPC</code> è¿™ä¸ªé—®é¢˜</p> <p>è§£å†³æ–¹æ¡ˆï¼š</p> <p><code>echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf &amp;&amp; sudo sysctl -p</code></p> <p>æˆ–é‡å¯ç”µè„‘</p> <h2 id="webview-ä¸­æ–‡æ˜¾ç¤ºä¹±ç çš„é—®é¢˜"><a href="#webview-ä¸­æ–‡æ˜¾ç¤ºä¹±ç çš„é—®é¢˜" class="header-anchor">#</a> WebView ä¸­æ–‡æ˜¾ç¤ºä¹±ç çš„é—®é¢˜</h2> <p>æŸäº›å®‰å“ä¸Šå‡ºç°æ­¤ç±»é—®é¢˜</p> <p>è§£å†³æ–¹å¼æ–¹å¼æ˜¯åœ¨ source ä¸­å¡«å†™ <code>baseUrl: ''</code>ï¼Œå…·ä½“åŸå› ä¸æ˜ã€‚</p> <p>ä¾‹å¦‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">source</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>html: userProtocolStr, baseUrl: <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="android-ç¼–è¯‘æ—¶æç¤ºç¼–è¯‘å·¥å…·ç‰ˆæœ¬ä¸åŒ¹é…çš„é—®é¢˜"><a href="#android-ç¼–è¯‘æ—¶æç¤ºç¼–è¯‘å·¥å…·ç‰ˆæœ¬ä¸åŒ¹é…çš„é—®é¢˜" class="header-anchor">#</a> android ç¼–è¯‘æ—¶æç¤ºç¼–è¯‘å·¥å…·ç‰ˆæœ¬ä¸åŒ¹é…çš„é—®é¢˜</h2> <blockquote><p>The SDK Build Tools revision X is too low for project â€˜:react-native-pickerâ€™. Minimum require X</p></blockquote> <p>åœ¨æ ¹ç›®å½•ä¸‹çš„ gradle æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ,è¿™æ ·å°±æŠŠæ¯ä¸ªè‡ªå·¥ç¨‹çš„ buildToolsVersion çš„ç‰ˆæœ¬æ”¹ä¸ºè¦æ±‚çš„ç‰ˆæœ¬äº†</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>subprojects <span class="token punctuation">{</span>
    afterEvaluate <span class="token punctuation">{</span>project -<span class="token operator">&gt;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>project.hasProperty<span class="token punctuation">(</span><span class="token string">&quot;android&quot;</span><span class="token punctuation">))</span> <span class="token punctuation">{</span>
            android <span class="token punctuation">{</span>
                compileSdkVersion <span class="token number">25</span>
                buildToolsVersion <span class="token string">'25.0.0'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="åœ¨-windows-ç¼–è¯‘æ—¶-js-æŠ¥é”™è¯´è·¯å¾„é—®é¢˜"><a href="#åœ¨-windows-ç¼–è¯‘æ—¶-js-æŠ¥é”™è¯´è·¯å¾„é—®é¢˜" class="header-anchor">#</a> åœ¨ windows ç¼–è¯‘æ—¶ JS æŠ¥é”™è¯´è·¯å¾„é—®é¢˜</h2> <p>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ PowerShell ç¼–è¯‘ JSï¼Œä¸è¦ä½¿ç”¨ CMDã€‚</p> <h2 id="fetch-å¦‚ä½•è®¾ç½®-è¯·æ±‚è¶…æ—¶"><a href="#fetch-å¦‚ä½•è®¾ç½®-è¯·æ±‚è¶…æ—¶" class="header-anchor">#</a> fetch å¦‚ä½•è®¾ç½®â€œè¯·æ±‚è¶…æ—¶â€</h2> <p>ç›®å‰ä¹Ÿæ²¡æœ‰å¾ˆå¥½çš„åŠæ³•è§£å†³è¶…æ—¶ï¼Œçœ‹ç½‘ä¸Šå¾ˆå¤šæ–¹æ¡ˆéƒ½ä¸å¯é ï¼Œä¸»æµçš„æ–¹å¼æ˜¯æŠ›å¼ƒè¿™æ¬¡ http è¯·æ±‚ã€‚</p> <p>ç”¨ <code>setTimeout()</code> æ–¹æ³•ï¼ŒæŠ›å¼ƒè¿™æ¬¡è¯·æ±‚ã€‚</p> <p>æˆ‘çœ‹åˆ°å¦å¤–ä¸€ç§ï¼Œå¼•å…¥ä¸€ä¸ª <a href="https://github.com/robinpowered/react-native-fetch-polyfill" target="_blank" rel="noopener noreferrer">polyfill çš„æ–‡ä»¶<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, ç„¶ååœ¨è‡ªå·±çš„ç½‘ç»œè¯·æ±‚æ–¹æ³•é‡Œï¼Œé‡‡ç”¨å®ƒå®šä¹‰çš„ fetch æ–¹æ³•ï¼Œå°±å¯ä»¥è®¾ç½® timeout å‚æ•°ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> fetch <span class="token keyword">from</span> <span class="token string">&quot;react-native-fetch-polyfill&quot;</span><span class="token punctuation">;</span>

<span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span> timeout<span class="token operator">:</span> <span class="token number">30</span> <span class="token operator">*</span> <span class="token number">1000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// a successful response</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// an error when the request fails, such as during a timeout</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h1 id="navigation-åœ¨ç™»å½•è§†å›¾çš„ç‰¹æ®Šå¤„ç†"><a href="#navigation-åœ¨ç™»å½•è§†å›¾çš„ç‰¹æ®Šå¤„ç†" class="header-anchor">#</a> navigation åœ¨ç™»å½•è§†å›¾çš„ç‰¹æ®Šå¤„ç†</h1> <p>https://github.com/react-navigation/react-navigation/issues/1815</p> <p>ç”±äºæˆ‘æ‰€åšçš„ app æ˜¯å…ˆè¿›å…¥ç©ºç™½é¡µé¢ï¼Œå†åˆ¤æ–­æ˜¾ç¤ºä¸»é¡µè¿˜æ˜¯ç™»å½•é¡µé¢ï¼Œç©ºç™½é¡µé¢ä¸Šç”¨æ¥å¤„ç† redux é€»è¾‘ï¼Œä»¥åŠæ˜¾ç¤º loadingã€‚ä¸ºäº†é˜²æ­¢å¯ä»¥é€€å›ç©ºç™½é¡µé¢ï¼Œéœ€è¦åšå¦‚ä¸‹å¤„ç†ï¼š</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> prevGetStateForAction <span class="token operator">=</span> RootStack<span class="token punctuation">.</span>router<span class="token punctuation">.</span>getStateForAction<span class="token punctuation">;</span>

RootStack<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function-variable function">getStateForAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">action<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;Navigation/BACK&quot;</span> <span class="token operator">&amp;&amp;</span> state <span class="token operator">&amp;&amp;</span> state<span class="token punctuation">.</span>routes<span class="token punctuation">[</span>state<span class="token punctuation">.</span>routes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>routeName <span class="token operator">===</span> <span class="token string">&quot;Login&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;Navigation/BACK&quot;</span> <span class="token operator">&amp;&amp;</span> state <span class="token operator">&amp;&amp;</span> state<span class="token punctuation">.</span>routes<span class="token punctuation">[</span>state<span class="token punctuation">.</span>routes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>routeName <span class="token operator">===</span> <span class="token string">&quot;Main&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Do not allow to go back to Login</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;Navigation/BACK&quot;</span> <span class="token operator">&amp;&amp;</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newRoutes <span class="token operator">=</span> state<span class="token punctuation">.</span>routes<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>routeName <span class="token operator">!==</span> <span class="token string">&quot;Login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> newIndex <span class="token operator">=</span> newRoutes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">prevGetStateForAction</span><span class="token punctuation">(</span>action<span class="token punctuation">,</span> <span class="token punctuation">{</span> index<span class="token operator">:</span> newIndex<span class="token punctuation">,</span> routes<span class="token operator">:</span> newRoutes <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">prevGetStateForAction</span><span class="token punctuation">(</span>action<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h1 id="navigation-ä½¿ç”¨ç¬”è®°"><a href="#navigation-ä½¿ç”¨ç¬”è®°" class="header-anchor">#</a> navigation ä½¿ç”¨ç¬”è®°</h1> <p><a href="./react-navigation-note">ä¼ é€é—¨</a></p> <h1 id="ä¸º-r-n-é…ç½®-typescript-å¼€å‘ç¯å¢ƒ"><a href="#ä¸º-r-n-é…ç½®-typescript-å¼€å‘ç¯å¢ƒ" class="header-anchor">#</a> ä¸º R-N é…ç½® TypeScript å¼€å‘ç¯å¢ƒ</h1> <p><a href="./react-native-typescript">ä¼ é€é—¨</a></p> <h1 id="ç”¨æ•°æ®çº¿é“¾æ¥è°ƒè¯•"><a href="#ç”¨æ•°æ®çº¿é“¾æ¥è°ƒè¯•" class="header-anchor">#</a> ç”¨æ•°æ®çº¿é“¾æ¥è°ƒè¯•</h1> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>adb reverse tcp:8081 tcp:8081
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h1 id="ç”¨-adb-æ¨¡æ‹Ÿèœå•é”®"><a href="#ç”¨-adb-æ¨¡æ‹Ÿèœå•é”®" class="header-anchor">#</a> ç”¨ adb æ¨¡æ‹Ÿèœå•é”®</h1> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>adb shell input keyevent <span class="token number">82</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h1 id="rn-æ‰“åŒ…"><a href="#rn-æ‰“åŒ…" class="header-anchor">#</a> RN æ‰“åŒ…</h1> <h2 id="android"><a href="#android" class="header-anchor">#</a> android</h2> <p>å…ˆç”¨ Java å·¥å…·ç”Ÿæˆ my-release-key.keystore</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>keytool -genkey -v -keystore my-release-key.keystore -alias my-key-alias -keyalg RSA -keysize <span class="token number">2048</span> -validity <span class="token number">10000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æŠŠ my-release-key.keystore æ–‡ä»¶æ”¾åˆ°ä½ å·¥ç¨‹ä¸­çš„ android/app æ–‡ä»¶å¤¹ä¸‹ã€‚</p> <p>æ‰“å¼€ android/app ä¸­çš„ build.gradle æ–‡ä»¶å’Œ android/gradle.properties</p> <p>build.gradle</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>signingConfigs <span class="token punctuation">{</span>
    release <span class="token punctuation">{</span>
        storeFile file<span class="token punctuation">(</span>MYAPP_RELEASE_STORE_FILE<span class="token punctuation">)</span>
        storePassword MYAPP_RELEASE_STORE_PASSWORD
        keyAlias MYAPP_RELEASE_KEY_ALIAS
        keyPassword MYAPP_RELEASE_KEY_PASSWORD
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

buildTypes <span class="token punctuation">{</span>
    release <span class="token punctuation">{</span>
        minifyEnabled enableProguardInReleaseBuilds
        proguardFiles getDefaultProguardFile<span class="token punctuation">(</span><span class="token string">&quot;proguard-android.txt&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;proguard-rules.pro&quot;</span>
        signingConfig signingConfigs.release
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>android/gradle.properties</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">MYAPP_RELEASE_STORE_FILE</span><span class="token operator">=</span>my-release-key.keystore
<span class="token assign-left variable">MYAPP_RELEASE_KEY_ALIAS</span><span class="token operator">=</span>my-key-alias
<span class="token assign-left variable">MYAPP_RELEASE_STORE_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span>
<span class="token assign-left variable">MYAPP_RELEASE_KEY_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è¿›å…¥ /android/ ç›®å½•ï¼Œcmd æ‰§è¡Œ gradlew assembleRelease</p> <h2 id="ä¸‹è½½-android-ä¾èµ–æ…¢"><a href="#ä¸‹è½½-android-ä¾èµ–æ…¢" class="header-anchor">#</a> ä¸‹è½½ android ä¾èµ–æ…¢</h2> <p>ä¿®æ”¹ <code>build.gradle</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>// Top-level build <span class="token function">file</span> where you can <span class="token function">add</span> configuration options common to all sub-projects/modules.

buildscript <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        maven<span class="token punctuation">{</span> url <span class="token string">'http://maven.aliyun.com/nexus/content/groups/public/'</span> <span class="token punctuation">}</span>
        jcenter<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    dependencies <span class="token punctuation">{</span>
        classpath <span class="token string">'com.android.tools.build:gradle:2.2.3'</span>

        // NOTE: Do not place your application dependencies here<span class="token punctuation">;</span> they belong
        // <span class="token keyword">in</span> the individual module build.gradle files
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

allprojects <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        maven<span class="token punctuation">{</span> url <span class="token string">'http://maven.aliyun.com/nexus/content/groups/public/'</span> <span class="token punctuation">}</span>
        jcenter<span class="token punctuation">(</span><span class="token punctuation">)</span>
        maven <span class="token punctuation">{</span>
            // All of React Native <span class="token punctuation">(</span>JS, Obj-C sources, Android binaries<span class="token punctuation">)</span> is installed from <span class="token function">npm</span>
            url <span class="token string">&quot;<span class="token variable">$rootDir</span>/../node_modules/react-native/android&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="æ‰¾ä¸åˆ°-android-sdk"><a href="#æ‰¾ä¸åˆ°-android-sdk" class="header-anchor">#</a> æ‰¾ä¸åˆ° android-sdk</h2> <p>å¯ä»¥åœ¨ <code>android/local.properties</code> ä¸­æ‰‹åŠ¨é…ç½®ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">## This file must *NOT* be checked into Version Control Systems,</span>
<span class="token comment"># as it contains information specific to your local configuration.</span>
<span class="token comment">#</span>
<span class="token comment"># Location of the SDK. This is only used by Gradle.</span>
<span class="token comment"># For customization when using a Version Control System, please read the</span>
<span class="token comment"># header note.</span>
<span class="token comment">#Mon Jul 23 17:38:05 CST 2018</span>
sdk.dir<span class="token operator">=</span>/media/wolfx/HDD/android/sdk
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="æ‰“åŒ…æ—¶å€™æŠ¥é”™-app-lintvitalrelease"><a href="#æ‰“åŒ…æ—¶å€™æŠ¥é”™-app-lintvitalrelease" class="header-anchor">#</a> æ‰“åŒ…æ—¶å€™æŠ¥é”™:app:lintVitalRelease</h2> <p>åœ¨ <code>android/app/build.gradle</code> ä¸­åŠ å…¥ <code>lintOptions</code>ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>android <span class="token punctuation">{</span>
    lintOptions <span class="token punctuation">{</span>
        checkReleaseBuilds <span class="token boolean">false</span>
        abortOnError <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">..</span>.
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="ndk-æ‰¾ä¸åˆ°-mipsel-mips64el"><a href="#ndk-æ‰¾ä¸åˆ°-mipsel-mips64el" class="header-anchor">#</a> NDK æ‰¾ä¸åˆ° mipsel/mips64el</h2> <p>æ–°ç‰ˆ NDK å»æ‰äº† mipselï¼Œéœ€è¦ä¸‹è½½æ—§ç‰ˆ(16b)æ›¿æ¢ã€‚
<a href="https://developer.android.google.cn/ndk/downloads/older_releases" target="_blank" rel="noopener noreferrer">https://developer.android.google.cn/ndk/downloads/older_releases<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h1 id="å‹ç›Ÿåˆ†äº«ã€ç¬¬ä¸‰æ–¹ç™»é™†ã€æ¨é€é›†æˆ"><a href="#å‹ç›Ÿåˆ†äº«ã€ç¬¬ä¸‰æ–¹ç™»é™†ã€æ¨é€é›†æˆ" class="header-anchor">#</a> å‹ç›Ÿåˆ†äº«ã€ç¬¬ä¸‰æ–¹ç™»é™†ã€æ¨é€é›†æˆ</h1> <p>æœ€å¥½ä¸‹è½½åŸç”Ÿç‰ˆæœ¬çš„ SDKï¼Œä¸è¦ä¸‹è½½ RN ç‰ˆæœ¬ï¼ŒRN ç‰ˆæœ¬å¯¹æ–°ç³»ç»Ÿå­˜åœ¨å…¼å®¹é—®é¢˜ã€‚å‹ç›Ÿåˆ†äº«çš„é›†æˆä¹Ÿæ˜¯ã€‚
ç„¶åä¸‹è½½ GitHub ä¸Šçš„å®˜æ–¹ DEMOï¼Œå¤åˆ¶å¿…è¦çš„æ–‡ä»¶åˆ°è‡ªå·±çš„é¡¹ç›®ã€‚</p> <p>åŸºæœ¬é…ç½®å¯ä»¥å‚è€ƒå®˜æ–¹ï¼Œä¸‹é¢æ˜¯æ¥æ”¶æ¨é€çš„è‡ªå®šä¹‰å‚æ•°ï¼š</p> <h2 id="android-ç«¯é›†æˆ"><a href="#android-ç«¯é›†æˆ" class="header-anchor">#</a> <strong>Android ç«¯é›†æˆ</strong></h2> <p>ä¿®æ”¹ <code>MainActivity.java</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>enjoybuild</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">Intent</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Nullable</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Log</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span></span><span class="token class-name">ReactActivity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span></span><span class="token class-name">Arguments</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span></span><span class="token class-name">ReactContext</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span></span><span class="token class-name">WritableMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>modules<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">DeviceEventManagerModule</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>umeng<span class="token punctuation">.</span>message<span class="token punctuation">.</span></span><span class="token class-name">PushAgent</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>umeng<span class="token punctuation">.</span>socialize<span class="token punctuation">.</span></span><span class="token class-name">UMShareAPI</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Set</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">ReactActivity</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * Returns the name of the main component registered from JavaScript.
     * This is used to schedule rendering of the component.
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> <span class="token function">getMainComponentName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;EnjoyBuild&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">PushModule</span><span class="token punctuation">.</span><span class="token function">initPushSDK</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">PushAgent</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onAppStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ShareModule</span><span class="token punctuation">.</span><span class="token function">initSocialSDK</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onActivityResult</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestCode<span class="token punctuation">,</span> <span class="token keyword">int</span> resultCode<span class="token punctuation">,</span> <span class="token class-name">Intent</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> resultCode<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UMShareAPI</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> resultCode<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onNewIntent</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onNewIntent</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setIntent</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è·å–æ¨é€ä¼ é€’çš„å‚æ•°</span>
        <span class="token comment">// https://developer.umeng.com/docs/66632/detail/66744#h2-u81EAu5B9Au4E49u53C2u657013</span>
        <span class="token class-name">Bundle</span> bun <span class="token operator">=</span> <span class="token function">getIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getExtras</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>bun <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">WritableMap</span> params <span class="token operator">=</span> <span class="token class-name">Arguments</span><span class="token punctuation">.</span><span class="token function">createMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keySet <span class="token operator">=</span> bun<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> keySet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> value <span class="token operator">=</span> bun<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                params<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token function">sendEvent</span><span class="token punctuation">(</span><span class="token class-name">MyModule</span><span class="token punctuation">.</span>reactContext<span class="token punctuation">,</span> <span class="token string">&quot;notification&quot;</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">sendEvent</span><span class="token punctuation">(</span><span class="token class-name">ReactContext</span> reactContext<span class="token punctuation">,</span>
                           <span class="token class-name">String</span> eventName<span class="token punctuation">,</span>
                           <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">WritableMap</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        reactContext
                <span class="token punctuation">.</span><span class="token function">getJSModule</span><span class="token punctuation">(</span><span class="token class-name">DeviceEventManagerModule<span class="token punctuation">.</span>RCTDeviceEventEmitter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br></div></div><p><code>MyModule.java</code> æ˜¯è‡ªå·±å®šä¹‰çš„æ¨¡å—ï¼Œä¸ºäº†è·å– RN çš„ä¸Šä¸‹æ–‡ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>enjoybuild</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span></span><span class="token class-name">ReactApplicationContext</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span></span><span class="token class-name">ReactContext</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span></span><span class="token class-name">ReactContextBaseJavaModule</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Created by wolfx on 18-11-6.
 */</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyModule</span> <span class="token keyword">extends</span> <span class="token class-name">ReactContextBaseJavaModule</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ReactContext</span> reactContext<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MyModule</span><span class="token punctuation">(</span><span class="token class-name">ReactApplicationContext</span> rc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>rc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        reactContext <span class="token operator">=</span> rc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;MyModule&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="ios-ç«¯é›†æˆ"><a href="#ios-ç«¯é›†æˆ" class="header-anchor">#</a> iOS ç«¯é›†æˆ</h2> <h3 id="_1ã€ä¸‹è½½ç›¸å…³-sdk"><a href="#_1ã€ä¸‹è½½ç›¸å…³-sdk" class="header-anchor">#</a> 1ã€ä¸‹è½½ç›¸å…³ SDK</h3> <p>1.1ã€ä¸‹è½½ç”¨äºå‹ç›Ÿé›†æˆçš„<a href="https://developer.umeng.com/sdk/reactnative" target="_blank" rel="noopener noreferrer">RN SDK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/67ecf1aa-b466-4e5a-adff-b73ec471bbc7.png" alt="UTOOLS1557762431548.png"></p> <p>1.2ã€ä¸‹è½½<a href="https://developer.umeng.com/sdk/ios" target="_blank" rel="noopener noreferrer">UMCommon.framework<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/88f8ac41-25ed-4194-8c4e-da9172586cab.png" alt="UTOOLS1557762459680.png"></p> <blockquote><p>æ³¨: è¿™ä¸ªè®°å¾—ä¸€å®šè¦ä¸‹è½½ iOS é€‰é¡¹ä¸‹é¢çš„ SDKï¼Œåé¢é›†æˆçš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œä¹‹å‰æŒ‰æ•™ç¨‹é›†æˆçš„æ—¶å€™æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œå°±å»å‹ç›Ÿ github çš„ demo é‡Œé¢å¤åˆ¶äº†è¿™ä¸ªæ–‡ä»¶ï¼Œç»“æœåœ¨é›†æˆçš„æ—¶å€™ç”±äºä¸æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¯¼è‡´åœ¨ Xcode10 ä¸Šé¢ä¸€ç›´é—ªé€€ï¼Œå´©æºƒæç¤ºæ˜¯<code>[&lt;UIStatusBarTimeItemView 0x101c29cd0&gt; valueForUndefinedKey:]: this class is not key value coding-compliant for the...</code>ï¼Œåé¢çš„æœ‹å‹å¦‚æœç¢°åˆ° iOS å‡çº§ä¹‹åé¡¹ç›®ç¼–è¯‘å¼‚å¸¸çš„ä¹Ÿå¯ä»¥è€ƒè™‘å‡çº§ SDK è¯•è¯•ã€‚</p></blockquote> <h3 id="_2ã€é›†æˆåˆ†äº«å’Œæˆæƒç™»é™†"><a href="#_2ã€é›†æˆåˆ†äº«å’Œæˆæƒç™»é™†" class="header-anchor">#</a> 2ã€é›†æˆåˆ†äº«å’Œæˆæƒç™»é™†</h3> <p>2.1ã€é¦–å…ˆè¿›å…¥é¡¹ç›®çš„ ios ç›®å½•ï¼Œè¿›å…¥å¯¹åº”çš„å·¥ç¨‹åç›®å½•ï¼Œæ–°å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼š<code>UMReactBridge</code>å’Œ<code>UMComponents</code></p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/ab2301a8-1891-4809-9672-32c659872508.png" alt="UTOOLS1557762497479.png"></p> <p>2.2ã€å°†<code>1.2</code>æ­¥éª¤ä¸‹è½½çš„æ–‡ä»¶<strong>iOS</strong>ç›®å½•ä¸‹çš„ common ä¸­çš„ frameworkï¼Œæ‹·å…¥<code>UMComponents</code>ä¸­ã€‚</p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/8c84d5b8-f02e-4301-ab97-261dfa93c878.png" alt="UTOOLS1557762526611.png"></p> <p>å°†<code>1.1</code>æ­¥éª¤ä¸‹è½½çš„æ–‡ä»¶<strong>iOS</strong>ç›®å½•ä¸‹ä¸­<strong>share</strong>ç›®å½•ä¸­çš„æœ€åæ‰€æœ‰æ–‡ä»¶ï¼Œæ‹·å…¥<code>UMComponents</code>ä¸­çš„æ–°å»ºæ–‡ä»¶å¤¹<code>UMShare</code>ä¸­,åœ¨å°†<strong>push</strong>æ–‡ä»¶é‡Œæœ€åçš„æ‰€æœ‰æ–‡ä»¶æ‹·å…¥<code>UMComponents</code>æ–‡ä»¶å¤¹ä¸­ã€‚çœ‹ä¸‹å›¾ï¼š</p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/585337e5-a7d7-4818-a6e6-6336bbc4b464.png" alt="UTOOLS1557762561374.png"></p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/331c998a-a722-4d02-a56e-6f527e6d906f.png" alt="UTOOLS1557762586561.png"></p> <p>é›†æˆä¹‹ååœ¨ xcode ä¸­çš„ç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/bed9c1b8-8d79-4eff-88af-69c3583385e2.png" alt="UTOOLS1557762607401.png"></p> <p>2.3ã€è¿›å…¥<code>1.1</code>æ­¥éª¤ä¸‹è½½æ–‡ä»¶çš„ ReactNative ç›®å½•ï¼Œæ‰¾åˆ°<code>commonã€ shareã€push</code>ç›®å½•ä¸­å¯¹åº”çš„<code>common_ios</code>å¹³å°ä¸­çš„æ¡¥æ¥<code>.h å’Œ .m</code>æ–‡ä»¶ï¼Œå…¨éƒ¨æ‹·è´è‡³æˆ‘ä»¬é¡¹ç›®åˆšåˆšæ–°å»ºçš„<code>UMReactBridge</code>æ–‡ä»¶å¤¹ä¸­ï¼Œçœ‹ä¸‹å›¾:</p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/7e7c2180-a70e-4b5c-a510-a3666ed1bf18.png" alt="UTOOLS1557762648241.png"></p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/f6472853-30fd-4480-ab4e-55c77010bdaf.png" alt="UTOOLS1557762673808.png"></p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/5ac1564d-40a0-4f3b-955a-f7a71bb4d3c5.png" alt="UTOOLS1557762692164.png"></p> <p>é›†æˆä¹‹å xcode ä¸­çš„ç›®å½•ç»“æ„ä¸º:</p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/ed361cb8-79e2-481d-81b3-8089ab67469f.png" alt="UTOOLS1557762708476.png"></p> <p>2.4ã€åœ¨<code>xcode</code>ä¸­æ‰“å¼€å·¥ç¨‹ç›®å½•ï¼Œå³é”®é»„è‰²é¡¹ç›®å<code>Add Files to &quot;xxx&quot;</code>ï¼Œ<code>options</code> ä¸­é€‰ä¸­<code>Create groups ã€ Copy items if needed</code>æ‰¾åˆ°æˆ‘ä»¬æ–°å»ºçš„<code>UMReactBridge</code>å’Œ<code>UMComponents</code>ï¼Œæœ€åç‚¹å‡»<code>add</code>æ·»åŠ ã€‚çœ‹ä¸‹å›¾</p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/c18f8203-7b25-431f-9d75-1b800d03a4ca.png" alt="UTOOLS1557762724765.png"></p> <p>2.5ã€<code>Linked Frameworks and Libraries</code> åŠ å…¥ç³»ç»Ÿä¾èµ–åº“ï¼šå¯å‚ç…§<a href="https://link.jianshu.com/?t=https%3A%2F%2Fdeveloper.umeng.com%2Fdocs%2F66632%2Fdetail%2F66825%23h3-u7B2Cu4E09u65B9u5E73u53F0u5E93u6DFBu52A0" target="_blank" rel="noopener noreferrer">é“¾æ¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>libsqlite3.tbd
CoreGraphics.framework
SystemConfiguration.framework
CoreTelephony.framework
libc++.tbd
libz.tbd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>2.6 é…ç½® SSO ç™½åå•ï¼Œå³é”® info.plist é€‰æ‹© source code æ‰“å¼€(plist å…·ä½“è®¾ç½®åœ¨ Build Setting -&gt; Packaging -&gt; Info.plist File å¯è·å– plist è·¯å¾„)è¯·æ ¹æ®é€‰æ‹©çš„å¹³å°å¯¹ä»¥ä¸‹é…ç½®è¿›è¡Œè£å‰ªï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>LSApplicationQueriesSchemes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>array</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å¾®ä¿¡ URL Scheme ç™½åå•--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>wechat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>weixin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- æ–°æµªå¾®åš URL Scheme ç™½åå•--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>sinaweibohd<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>sinaweibo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>sinaweibosso<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>weibosdk<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>weibosdk2.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- QQã€Qzone URL Scheme ç™½åå•--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqqapi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqq<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqqOpensdkSSoLogin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqqconnect<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqqopensdkdataline<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqqopensdkgrouptribeshare<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqqopensdkfriend<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqqopensdkapi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqqopensdkapiV2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqqopensdkapiV3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqqopensdkapiV4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqzoneopensdk<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>wtloginmqq<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>wtloginmqq2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqqwpa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqzone<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqzonev2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqzoneshare<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>wtloginqzone<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqzonewx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqzoneopensdkapiV2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqzoneopensdkapi19<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqzoneopensdkapi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mqqbrowser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>mttbrowser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>tim<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>timapi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>timopensdkfriend<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>timwpa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>timgamebindinggroup<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>timapiwallet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>timOpensdkSSoLogin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>wtlogintim<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>timopensdkgrouptribeshare<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>timopensdkapiV4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>timgamebindinggroup<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>timopensdkdataline<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>wtlogintimV1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>timapiV1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>array</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/fb432ba0-9afd-4dcc-864a-15a1e7f082e6.png" alt="UTOOLS1557762776354.png"></p> <p>2.7ã€é…ç½® URL Scheme</p> <p>URL Scheme æ˜¯é€šè¿‡ç³»ç»Ÿæ‰¾åˆ°å¹¶è·³è½¬å¯¹åº” app çš„ä¸€ç±»è®¾ç½®ï¼Œé€šè¿‡å‘é¡¹ç›®ä¸­çš„ info.plist æ–‡ä»¶ä¸­åŠ å…¥ URL types å¯ä½¿ç”¨ç¬¬ä¸‰æ–¹å¹³å°æ‰€æ³¨å†Œçš„ appkey ä¿¡æ¯å‘ç³»ç»Ÿæ³¨å†Œä½ çš„ appï¼Œå½“è·³è½¬åˆ°ç¬¬ä¸‰æ–¹åº”ç”¨æˆæƒæˆ–åˆ†äº«åï¼Œå¯ç›´æ¥è·³è½¬å›ä½ çš„ appã€‚</p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/0b59d370-c079-46e4-b9b0-f73e4eb7f348.png" alt="UTOOLS1557762805820.png"></p> <p>2.8 <strong>åˆå§‹åŒ–</strong><code>AppDelegate.m</code>è®¾ç½®å‹ç›Ÿ<code>appkey</code>å’Œ<code>appSecret(å¦‚æœæœ‰æ¨é€åŠŸèƒ½çš„è¯éœ€è¦åŠ )</code>ä»¥åŠå„ä¸ªå¹³å°çš„<code>appkey</code>å’Œ<code>secret</code>.</p> <div class="language-objectivec line-numbers-mode"><pre class="language-objectivec"><code><span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application didFinishLaunchingWithOptions<span class="token punctuation">:</span><span class="token punctuation">(</span>NSDictionary <span class="token operator">*</span><span class="token punctuation">)</span>launchOptions
<span class="token punctuation">{</span>
  <span class="token comment">/* æ‰“å¼€è°ƒè¯•æ—¥å¿— */</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>UMSocialManager defaultManager<span class="token punctuation">]</span> openLog<span class="token punctuation">:</span>YES<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">/* è®¾ç½®å‹ç›Ÿappkey */</span>
  <span class="token punctuation">[</span>RNUMConfigure initWithAppkey<span class="token punctuation">:</span><span class="token string">@&quot;5bd*********0db&quot;</span> channel<span class="token punctuation">:</span><span class="token string">@&quot;App Store&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">/*
   * å…³é—­å¼ºåˆ¶éªŒè¯httpsï¼Œå¯å…è®¸httpå›¾ç‰‡åˆ†äº«ï¼Œä½†éœ€è¦åœ¨info.plistè®¾ç½®å®‰å…¨åŸŸå
   */</span>
  <span class="token punctuation">[</span>UMSocialGlobal shareInstance<span class="token punctuation">]</span><span class="token punctuation">.</span>isUsingHttpsWhenShareContent <span class="token operator">=</span> NO<span class="token punctuation">;</span>

  <span class="token comment">/*
   è®¾ç½®å¾®ä¿¡çš„appKeyå’ŒappSecret
   [å¾®ä¿¡å¹³å°ä»U-Share 4/5å‡çº§è¯´æ˜]http://dev.umeng.com/social/ios/%E8%BF%9B%E9%98%B6%E6%96%87%E6%A1%A3#1_1
   */</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span>UMSocialManager defaultManager<span class="token punctuation">]</span> setPlaform<span class="token punctuation">:</span>UMSocialPlatformType_WechatSession appKey<span class="token punctuation">:</span><span class="token string">@&quot;wxd******&quot;</span> appSecret<span class="token punctuation">:</span><span class="token string">@&quot;e7b246a7bdcfe75100e77eb9e999bf37&quot;</span> redirectURL<span class="token punctuation">:</span>nil<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">/* è®¾ç½®åˆ†äº«åˆ°QQäº’è”çš„appID
   * U-Share SDKä¸ºäº†å…¼å®¹å¤§éƒ¨åˆ†å¹³å°å‘½åï¼Œç»Ÿä¸€ç”¨appKeyå’ŒappSecretè¿›è¡Œå‚æ•°è®¾ç½®ï¼Œè€ŒQQå¹³å°ä»…éœ€å°†appIDä½œä¸ºU-Shareçš„appKeyå‚æ•°ä¼ è¿›å³å¯ã€‚
   100424468.no permission of union id
   [QQ/QZoneå¹³å°é›†æˆè¯´æ˜]http://dev.umeng.com/social/ios/%E8%BF%9B%E9%98%B6%E6%96%87%E6%A1%A3#1_3
   */</span>

  <span class="token punctuation">[</span><span class="token punctuation">[</span>UMSocialManager defaultManager<span class="token punctuation">]</span> setPlaform<span class="token punctuation">:</span>UMSocialPlatformType_QQ appKey<span class="token punctuation">:</span><span class="token string">@&quot;*****&quot;</span><span class="token comment">/*è®¾ç½®QQå¹³å°çš„appID*/</span>  appSecret<span class="token punctuation">:</span><span class="token string">@&quot;*******&quot;</span> redirectURL<span class="token punctuation">:</span><span class="token operator">@</span>&quot;http<span class="token punctuation">:</span><span class="token comment">//mobile.umeng.com/social&quot;];</span>

  <span class="token comment">// Push's basic setting æ¨é€è®¾ç½®!!</span>
  UMessageRegisterEntity <span class="token operator">*</span> entity <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UMessageRegisterEntity alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">//typeæ˜¯å¯¹æ¨é€çš„å‡ ä¸ªå‚æ•°çš„é€‰æ‹©ï¼Œå¯ä»¥é€‰æ‹©ä¸€ä¸ªæˆ–è€…å¤šä¸ªã€‚é»˜è®¤æ˜¯ä¸‰ä¸ªå…¨éƒ¨æ‰“å¼€ï¼Œå³ï¼šå£°éŸ³ï¼Œå¼¹çª—ï¼Œè§’æ ‡</span>
  entity<span class="token punctuation">.</span>types <span class="token operator">=</span> UMessageAuthorizationOptionBadge<span class="token operator">|</span>UMessageAuthorizationOptionAlert<span class="token operator">|</span>UMessageAuthorizationOptionSound<span class="token punctuation">;</span>
  <span class="token punctuation">[</span>UNUserNotificationCenter currentNotificationCenter<span class="token punctuation">]</span><span class="token punctuation">.</span>delegate<span class="token operator">=</span><span class="token keyword">self</span><span class="token punctuation">;</span>

  <span class="token punctuation">[</span>UMessage registerForRemoteNotificationsWithLaunchOptions<span class="token punctuation">:</span>launchOptions Entity<span class="token punctuation">:</span>nil completionHandler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL granted<span class="token punctuation">,</span> NSError <span class="token operator">*</span> _Nullable error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>granted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;deviceToken+++++++++&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> YES<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä»æ”¯ä»˜ã€åˆ†äº«ã€ç¬¬ä¸‰æ–¹ç™»é™†ç­‰è·³è½¬ä¼šæœ¬APPæ—¶çš„å›è°ƒï¼Œå¿…é¡»å®ç°ï¼Œå¦åˆ™æ”¶ä¸åˆ°åˆ†äº«æˆåŠŸæ—¶çš„å›è°ƒï¼ï¼ï¼ï¼</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application openURL<span class="token punctuation">:</span><span class="token punctuation">(</span>NSURL <span class="token operator">*</span><span class="token punctuation">)</span>url sourceApplication<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>sourceApplication annotation<span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>annotation
  <span class="token punctuation">{</span>
    BOOL result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UMSocialManager defaultManager<span class="token punctuation">]</span> handleOpenURL<span class="token punctuation">:</span>url<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å…¶ä»–å¦‚æ”¯ä»˜ç­‰SDKçš„å›è°ƒ</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application handleOpenURL<span class="token punctuation">:</span><span class="token punctuation">(</span>NSURL <span class="token operator">*</span><span class="token punctuation">)</span>url
  <span class="token punctuation">{</span>
    BOOL result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UMSocialManager defaultManager<span class="token punctuation">]</span> handleOpenURL<span class="token punctuation">:</span>url<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å…¶ä»–å¦‚æ”¯ä»˜ç­‰SDKçš„å›è°ƒ</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><p>2.9ã€æä¾›ç»™ RN è°ƒç”¨çš„æ–¹æ³•åœ¨<code>UMShareModule.m</code>ä¸­æŸ¥çœ‹.</p> <p>2.10ã€è¿›å…¥ä¸‹è½½ç›®å½•çš„<code>ReactNative</code>æ‰¾åˆ°<code>common</code>ä¸‹çš„<code>js</code>ä¸­çš„<code>ShareUtil.js(åŒ…å«åˆ†äº«å’Œç™»é™†çš„æ–¹æ³•)</code>ï¼Œæ‹·è´åˆ°æˆ‘ä»¬<code>RN</code>ç›®å½•ä¸‹ï¼Œå³å¯åœ¨ RN ä¸­å¯¼å…¥ä½¿ç”¨åˆ†äº«çš„æ–¹æ³•å•¦ã€‚</p> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/3c7f6d0b-effc-4078-bba7-7045af1fdeaf.png" alt="UTOOLS1557762840547.png"></p> <p>2.11ã€åœ¨ RN ä¸­è°ƒç”¨</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> ShareUtil <span class="token keyword">from</span> <span class="token string">'./ShareUtil'</span><span class="token punctuation">;</span>
<span class="token comment">//åˆ†äº«</span>
 ShareUtile<span class="token punctuation">.</span><span class="token function">shareboard</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span>img<span class="token punctuation">,</span>url<span class="token punctuation">,</span>title<span class="token punctuation">,</span>list<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span>message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>result<span class="token operator">:</span>message<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// text ä¸ºåˆ†äº«å†…å®¹</span>
<span class="token comment">// img ä¸ºå›¾ç‰‡åœ°å€ï¼Œå¯ä»¥ä¸ºé“¾æ¥ï¼Œæœ¬åœ°åœ°å€ä»¥åŠreså›¾ç‰‡ï¼ˆå¦‚æœä½¿ç”¨res,è¯·ä½¿ç”¨å¦‚ä¸‹å†™æ³•ï¼šres/icon.pngï¼‰</span>
<span class="token comment">// url ä¸ºåˆ†äº«é“¾æ¥ï¼Œå¯ä»¥ä¸ºç©º</span>
<span class="token comment">// title ä¸ºåˆ†äº«é“¾æ¥çš„æ ‡é¢˜</span>
<span class="token comment">// list ä¸ºåˆ†äº«å¹³å°æ•°ç»„ï¼Œå¦‚ï¼švar list = [0,1,2]</span>
<span class="token comment">// callbackä¸­codeä¸ºé”™è¯¯ç ï¼Œå½“ä¸º0æ—¶ï¼Œæ ‡è®°æˆåŠŸã€‚messageä¸ºé”™è¯¯ä¿¡æ¯</span>

<span class="token comment">//ç¬¬ä¸‰æ–¹ç™»é™†</span>
ShareUtile<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span>result<span class="token punctuation">,</span>message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">// iOSå¹³å°</span>
          <span class="token comment">//ç™»é™†æˆåŠŸï¼Œè¿”å›ç¬¬ä¸‰æ–¹è´¦å·çš„ä¿¡æ¯ï¼Œ</span>
          <span class="token comment">//æ¯”å¦‚openIDã€nickNameã€headPathç­‰ä¿¡æ¯ï¼Œè¿™æ—¶å°±å¯ä»¥ä¼ ç»™è‡ªå·±çš„åå°å°ä¼™ä¼´å…¥åº“å•¦!!!</span>
        <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><blockquote><p>æ³¨ï¼šandroid ä¸ ios å¹³å°æˆåŠŸå›è°ƒä¸­çš„ code å€¼ä¸ä¸€è‡´ï¼Œios æˆåŠŸæ—¶ code===200ï¼Œandroid æˆåŠŸæ—¶ code===0,æ–‡æ¡£å†™çš„æ˜¯ 0ï¼Œå½“æ—¶è¿˜è¢«å°å‘å•¦ä¸€æŠŠã€‚</p></blockquote> <h3 id="_3ã€é›†æˆæ¶ˆæ¯æ¨é€"><a href="#_3ã€é›†æˆæ¶ˆæ¯æ¨é€" class="header-anchor">#</a> 3ã€é›†æˆæ¶ˆæ¯æ¨é€</h3> <p>SDK ç«¯é›†æˆå·²ç»åœ¨åˆ†äº«å’Œç™»é™†æ­¥éª¤ä¸­å·²ç»é›†æˆï¼Œéƒ½æœ‰æˆªå›¾å‚è€ƒï¼Œä¸‹é¢ç›´æ¥è¿›å…¥åŠŸèƒ½å®ç°æ­¥éª¤å§ï¼š</p> <ul><li>å…¶å®å¯¹äºæ¨é€åŠŸèƒ½ï¼Œæœ¬è´¨è¿˜æ˜¯é›†æˆåŸç”Ÿç³»ç»Ÿç«¯æ¨é€åŠŸèƒ½ï¼Œå¤§éƒ¨åˆ†ä»£ç é€»è¾‘è¿˜æ˜¯åœ¨åŸç”Ÿç«¯å®ç°ï¼Œæ¯”å¦‚ æ³¨å†Œæ¨é€æƒé™ã€è·å– DeviceTokenã€è®¾ç½®æ¨é€æé†’çš„ç±»å‹ï¼Œè®¾ç½®æ”¶åˆ°æ¨é€æ—¶çš„å›è°ƒç­‰ã€‚</li> <li>æ¯”è¾ƒçƒ¦çš„æ˜¯å¯¹æ¨é€è¯ä¹¦çš„é…ç½®ï¼Œæ³¨: å¦‚æœåšæ¨é€çš„è¯å¿…é¡»æ˜¯ä»˜è´¹çš„å¼€å‘è€…è´¦å·ç”Ÿæˆè¯ä¹¦æ‰å¯ä»¥ï¼Œå¦åˆ™åœ¨ Xcode é‡Œè®¾ç½®å¼€å¯æ¨é€æƒé™çš„æ—¶å€™ä¼šæ‰¾ä¸åˆ°è¯¥èœå•é¡¹ã€‚çœ‹ä¸‹å›¾
<img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/55f37522-4f4d-449f-85ac-c49cc272f658.png" alt="UTOOLS1557762871589.png"></li> <li>å…·ä½“çš„é›†æˆæ­¥éª¤ä»¥åŠè¯ä¹¦ç”Ÿæˆå‚è€ƒå‹ç›Ÿå®˜ç½‘æ•™ç¨‹ï¼š
<a href="http://dev.umeng.com/sdk_integate/ios-integrate-guide/push%E8%AF%81%E4%B9%A6%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97" target="_blank" rel="noopener noreferrer">è¯ä¹¦é…ç½®<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="http://dev.umeng.com/sdk_integate/ios-integrate-guide/push" target="_blank" rel="noopener noreferrer">é›†æˆæ­¥éª¤<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>åœ¨æ¨é€çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ä¸é€šçš„ tag å€¼å¯¹ç”¨æˆ·åˆ†ç»„è¿›è¡Œæ¨é€ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç”¨æˆ· id è¿›è¡Œç²¾å‡†æ¨é€ï¼ŒRN ä¹Ÿæä¾›æ¥å¯¹åº”çš„æ–¹æ³• PushUtil.addTag(tag,(code,remain) =&gt;{ })å’Œ PushUtil.addAlias(alias,type,(code) =&gt;{ })ï¼Œ<a href="https://developer.umeng.com/docs/66632/detail/67587#h1-u63A8u90013" target="_blank" rel="noopener noreferrer">å…·ä½“å‚è€ƒæ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</li> <li>è¿˜æœ‰å¾…ä¼˜åŒ–çš„åŠŸèƒ½: å…³äº iOS å¦‚ä½•åœ¨æ¥æ”¶åˆ°æ¨é€åæ‰“å¼€æŒ‡å®šé¡µé¢ï¼Œ å®˜æ–¹ç»™çš„åœ°å€ä»¥åŠæ‰¾ä¸åˆ°äº†ï¼Œ æˆ‘è‡ªå·±çš„å®ç°æ–¹æ³•æ˜¯åœ¨åŸç”Ÿç«¯æ”¶åˆ°æ¨é€æ¶ˆæ¯åå‚è€ƒ RN æ–‡æ¡£ä¸­åŸç”Ÿç«¯è°ƒç”¨ RN çš„æ–¹æ³•ä½¿ç”¨é€šçŸ¥æ¥å®ç°ï¼ŒæœŸå¾…æœ‹å‹ä»¬æœ‰å¥½çš„æ–¹æ³•ï¼ŒæœŸå¾…èµæ•™ã€‚
æ¨é€ä¸»è¦ä»£ç :</li></ul> <p><code>AppDelegate.h</code>é¡µé¢</p> <div class="language-objectivec line-numbers-mode"><pre class="language-objectivec"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>UIKit<span class="token operator">/</span>UIKit<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>UMPush<span class="token operator">/</span>UMessage<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>

<span class="token comment">//ï¼ï¼ï¼ï¼ä¸€å®šè¦å®ç°è¿™ä¸ªä»£ç†æ–¹æ³• ï¼šUNUserNotificationCenterDelegate</span>
<span class="token keyword">@interface</span> AppDelegate <span class="token punctuation">:</span> UIResponder <span class="token operator">&lt;</span>UIApplicationDelegate<span class="token punctuation">,</span>UNUserNotificationCenterDelegate<span class="token operator">&gt;</span>

<span class="token keyword">@property</span> <span class="token punctuation">(</span>nonatomic<span class="token punctuation">,</span> strong<span class="token punctuation">)</span> UIWindow <span class="token operator">*</span>window<span class="token punctuation">;</span>

<span class="token keyword">@end</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>AppDelegate.m</code>é¡µé¢</p> <div class="language-objectivec line-numbers-mode"><pre class="language-objectivec"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token string">&quot;AppDelegate.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>React<span class="token operator">/</span>RCTBundleURLProvider<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>React<span class="token operator">/</span>RCTRootView<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token string">&quot;RNUMConfigure.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>UMShare<span class="token operator">/</span>UMShare<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token string">&quot;YouMengNotice.h&quot;</span></span>

<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application didFinishLaunchingWithOptions<span class="token punctuation">:</span><span class="token punctuation">(</span>NSDictionary <span class="token operator">*</span><span class="token punctuation">)</span>launchOptions
<span class="token punctuation">{</span>
  <span class="token comment">// Push's basic setting</span>
  UMessageRegisterEntity <span class="token operator">*</span> entity <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UMessageRegisterEntity alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">//typeæ˜¯å¯¹æ¨é€çš„å‡ ä¸ªå‚æ•°çš„é€‰æ‹©ï¼Œå¯ä»¥é€‰æ‹©ä¸€ä¸ªæˆ–è€…å¤šä¸ªã€‚é»˜è®¤æ˜¯ä¸‰ä¸ªå…¨éƒ¨æ‰“å¼€ï¼Œå³ï¼šå£°éŸ³ï¼Œå¼¹çª—ï¼Œè§’æ ‡</span>
  entity<span class="token punctuation">.</span>types <span class="token operator">=</span> UMessageAuthorizationOptionBadge<span class="token operator">|</span>UMessageAuthorizationOptionAlert<span class="token operator">|</span>UMessageAuthorizationOptionSound<span class="token punctuation">;</span>
<span class="token comment">// éœ€è¦å®ç°ä»£ç†ï¼Œç”¨äºä¸‹é¢ä»£ç†æ–¹æ³•çš„å®ç°ã€‚</span>
  <span class="token punctuation">[</span>UNUserNotificationCenter currentNotificationCenter<span class="token punctuation">]</span><span class="token punctuation">.</span>delegate<span class="token operator">=</span><span class="token keyword">self</span><span class="token punctuation">;</span>

  <span class="token punctuation">[</span>UMessage registerForRemoteNotificationsWithLaunchOptions<span class="token punctuation">:</span>launchOptions Entity<span class="token punctuation">:</span>nil completionHandler<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>BOOL granted<span class="token punctuation">,</span> NSError <span class="token operator">*</span> _Nullable error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>granted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;deviceToken+++++++++&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">mark <span class="token operator">-</span> Push</span></span>
<span class="token comment">//åœ¨è¿™ä¸ªæ–¹æ³•æ‰“å°å‡º deviceTokenï¼Œ ä¾¿äºåœ¨å‹ç›Ÿåå°æ·»åŠ æµ‹è¯•è®¾å¤‡è¿›è¡Œæµ‹è¯•</span>
<span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application didRegisterForRemoteNotificationsWithDeviceToken<span class="token punctuation">:</span><span class="token punctuation">(</span>NSData <span class="token operator">*</span><span class="token punctuation">)</span>deviceToken<span class="token punctuation">{</span>
  <span class="token punctuation">[</span>UMessage registerDeviceToken<span class="token punctuation">:</span>deviceToken<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;deviceToken+++++++++%@&quot;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span>deviceToken description<span class="token punctuation">]</span> stringByReplacingOccurrencesOfString<span class="token punctuation">:</span> <span class="token string">@&quot;&lt;&quot;</span> withString<span class="token punctuation">:</span> <span class="token string">@&quot;&quot;</span><span class="token punctuation">]</span>
                stringByReplacingOccurrencesOfString<span class="token punctuation">:</span> <span class="token string">@&quot;&gt;&quot;</span> withString<span class="token punctuation">:</span> <span class="token string">@&quot;&quot;</span><span class="token punctuation">]</span>
               stringByReplacingOccurrencesOfString<span class="token punctuation">:</span> <span class="token string">@&quot; &quot;</span> withString<span class="token punctuation">:</span> <span class="token string">@&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application didFailToRegisterForRemoteNotificationsWithError<span class="token punctuation">:</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span><span class="token punctuation">)</span>error<span class="token punctuation">{</span>

<span class="token punctuation">}</span>
<span class="token comment">// æ¬¡æ–¹æ³•åœ¨iOS10ä»¥åï¼Œå·²ç»ä¸å†æ”¯æŒ</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application didReceiveRemoteNotification<span class="token punctuation">:</span><span class="token punctuation">(</span>NSDictionary <span class="token operator">*</span><span class="token punctuation">)</span>userInfo
<span class="token punctuation">{</span>
  <span class="token comment">//å…³é—­å‹ç›Ÿè‡ªå¸¦çš„å¼¹å‡ºæ¡†</span>
  <span class="token punctuation">[</span>UMessage setAutoAlert<span class="token punctuation">:</span>NO<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span>UMessage didReceiveRemoteNotification<span class="token punctuation">:</span>userInfo<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token punctuation">[</span>YouMengNotice OCsendMessageToReactNative<span class="token punctuation">:</span>userInfo<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">//iOS10æ–°å¢ï¼šå¤„ç†å‰å°æ”¶åˆ°é€šçŸ¥çš„ä»£ç†æ–¹æ³•</span>
<span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>userNotificationCenter<span class="token punctuation">:</span><span class="token punctuation">(</span>UNUserNotificationCenter <span class="token operator">*</span><span class="token punctuation">)</span>center willPresentNotification<span class="token punctuation">:</span><span class="token punctuation">(</span>UNNotification <span class="token operator">*</span><span class="token punctuation">)</span>notification withCompletionHandler<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>UNNotificationPresentationOptions<span class="token punctuation">)</span><span class="token punctuation">)</span>completionHandler<span class="token punctuation">{</span>
  NSDictionary <span class="token operator">*</span> userInfo <span class="token operator">=</span> notification<span class="token punctuation">.</span>request<span class="token punctuation">.</span>content<span class="token punctuation">.</span>userInfo<span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">[</span>notification<span class="token punctuation">.</span>request<span class="token punctuation">.</span>trigger isKindOfClass<span class="token punctuation">:</span><span class="token punctuation">[</span>UNPushNotificationTrigger class<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">//åº”ç”¨å¤„äºå‰å°æ—¶çš„è¿œç¨‹æ¨é€æ¥å—</span>
    <span class="token comment">//å…³é—­å‹ç›Ÿè‡ªå¸¦çš„å¼¹å‡ºæ¡†</span>
    <span class="token punctuation">[</span>UMessage setAutoAlert<span class="token punctuation">:</span>NO<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">//å¿…é¡»åŠ è¿™å¥ä»£ç </span>
    <span class="token punctuation">[</span>UMessage didReceiveRemoteNotification<span class="token punctuation">:</span>userInfo<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// åœ¨è¿™é‡Œè‡ªå·±å®ç°æ¥åœ¨æ¥æ”¶åˆ°è¿œç¨‹æ¨é€æ—¶ï¼Œä¸»åŠ¨è°ƒç”¨RNç«¯çš„ï¼ŒæŠŠé€šçŸ¥å†…å®¹ä¼ ç»™RNï¼Œè¿™æ ·å°±å¯ä»¥æ§åˆ¶RNæ”¶åˆ°æ¨é€æ—¶è·³è½¬åˆ°æŒ‡å®šé¡µé¢æ¥ã€‚</span>
    <span class="token punctuation">[</span>YouMengNotice OCsendMessageToReactNative<span class="token punctuation">:</span>userInfo<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token comment">//åº”ç”¨å¤„äºå‰å°æ—¶çš„æœ¬åœ°æ¨é€æ¥å—</span>
  <span class="token punctuation">}</span>
  <span class="token function">completionHandler</span><span class="token punctuation">(</span>UNNotificationPresentationOptionSound<span class="token operator">|</span>UNNotificationPresentationOptionBadge<span class="token operator">|</span>UNNotificationPresentationOptionAlert<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//iOS10æ–°å¢ï¼šå¤„ç†åå°ç‚¹å‡»é€šçŸ¥çš„ä»£ç†æ–¹æ³•</span>
<span class="token comment">//è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨APPæ¥æ”¶åˆ°é€šçŸ¥ä¹‹åï¼Œç‚¹å‡»é€šçŸ¥æ è·³è½¬åˆ°APPæ—¶æ‰è°ƒç”¨çš„ï¼Œ æ³¨æ„ï¼šï¼šï¼ï¼å¦‚æœç›´æ¥ç‚¹å‡»APPæ˜¯æ²¡ç”¨çš„</span>
<span class="token comment">//çŸ¥è¯†ç‚¹ï¼ï¼ iOSçš„é€šçŸ¥ åˆ†APPåœ¨å‰å°æ—¶æ˜¾ç¤ºå’Œç‚¹å‡»é€šçŸ¥æ è·³è½¬åˆ°APPæ˜¾ç¤ºï¼Œ å¦‚æœç›´æ¥ç‚¹å‡»APPçš„è¯æ˜¯ä¸ä¼šèµ°ä¸Šé¢çš„ä¸¤ä¸ªå›è°ƒæ–¹æ³•çš„ï¼Œä¹‹å‰ç†è§£é”™è¯¯</span>
<span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>userNotificationCenter<span class="token punctuation">:</span><span class="token punctuation">(</span>UNUserNotificationCenter <span class="token operator">*</span><span class="token punctuation">)</span>center didReceiveNotificationResponse<span class="token punctuation">:</span><span class="token punctuation">(</span>UNNotificationResponse <span class="token operator">*</span><span class="token punctuation">)</span>response withCompletionHandler<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>completionHandler<span class="token punctuation">{</span>
  NSDictionary <span class="token operator">*</span> userInfo <span class="token operator">=</span> response<span class="token punctuation">.</span>notification<span class="token punctuation">.</span>request<span class="token punctuation">.</span>content<span class="token punctuation">.</span>userInfo<span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">[</span>response<span class="token punctuation">.</span>notification<span class="token punctuation">.</span>request<span class="token punctuation">.</span>trigger isKindOfClass<span class="token punctuation">:</span><span class="token punctuation">[</span>UNPushNotificationTrigger class<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">//åº”ç”¨å¤„äºåå°æ—¶çš„è¿œç¨‹æ¨é€æ¥å—</span>
    <span class="token comment">//å¿…é¡»åŠ è¿™å¥ä»£ç </span>
    <span class="token punctuation">[</span>UMessage didReceiveRemoteNotification<span class="token punctuation">:</span>userInfo<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>YouMengNotice performSelector<span class="token punctuation">:</span><span class="token keyword">@selector</span><span class="token punctuation">(</span>OCsendMessageToReactNative<span class="token punctuation">:</span><span class="token punctuation">)</span> withObject<span class="token punctuation">:</span>userInfo afterDelay<span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//    [YouMengNotice OCsendMessageToReactNative:userInfo];</span>


  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token comment">//åº”ç”¨å¤„äºåå°æ—¶çš„æœ¬åœ°æ¨é€æ¥å—</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br></div></div><p>RN ç«¯å®ç°ï¼š</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> PushUtil <span class="token keyword">from</span> <span class="token string">&quot;../Tools/PushUtil.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NativeModules<span class="token punctuation">,</span> NativeEventEmitter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-native&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> YouMengNotice <span class="token punctuation">}</span> <span class="token operator">=</span> NativeModules<span class="token punctuation">;</span>
<span class="token keyword">const</span> myNativeEvt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NativeEventEmitter</span><span class="token punctuation">(</span>YouMengNotice<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//åˆ›å»ºè‡ªå®šä¹‰äº‹ä»¶æ¥å£</span>

<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//æ”¶åˆ°åŸç”Ÿç«¯å‘æ¥çš„æ¨é€æ¶ˆæ¯ï¼Œè¿™é‡Œå¤„ç†é¡µé¢è·³è½¬é€»è¾‘</span>
   myNativeEvt<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token string">&quot;OCSendToRN&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;åŸç”Ÿç«¯çš„æ¶ˆæ¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">msg</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//æ·»åŠ tagï¼Œå³åˆ†ç»„ï¼Œåœ¨æ¨é€æ—¶å¯ä»¥å¯¹ä¸åŒåˆ†ç»„ç”¨æˆ·è¿›è¡Œæ¨é€</span>
    <span class="token comment">// PushUtil.addTag(&quot;ccj&quot;,(code, res) =&gt;{</span>
    <span class="token comment">//   Alert.alert(&quot;æç¤º&quot;, &quot;&quot;+code+JSON.stringify(res));</span>
    <span class="token comment">// })</span>

    PushUtil<span class="token punctuation">.</span><span class="token function">addTag</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸ªäººç”¨æˆ·&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Alert.alert(&quot;æç¤º&quot;, &quot;&quot;+code+JSON.stringify(res));</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h1 id="åˆ¶ä½œ-android-å¯åŠ¨é¡µ"><a href="#åˆ¶ä½œ-android-å¯åŠ¨é¡µ" class="header-anchor">#</a> åˆ¶ä½œ Android å¯åŠ¨é¡µ</h1> <p>1.é¦–å…ˆç¼–å†™æ ·å¼æ–‡ä»¶ <code>res/values/style.xml</code> åŠ å…¥ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Dialog_Fullscreen<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android:windowTranslucentStatus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android:windowTranslucentNavigation<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>2.ç¼–å†™ <code>res/layout/activity_launch.xml</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@drawable/ic_launcher<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>3.ç¼–å†™ç•Œé¢ <code>SplashScreen.java</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">Activity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">Dialog</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SplashScreen</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Dialog</span> mSplashDialog<span class="token punctuation">;</span> <span class="token comment">// æ˜¾ç¤ºå¯åŠ¨é¡µ</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Activity</span> activity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mSplashDialog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dialog</span><span class="token punctuation">(</span>activity<span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>Dialog_Fullscreen<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSplashDialog<span class="token punctuation">.</span><span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_launch<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSplashDialog<span class="token punctuation">.</span><span class="token function">setCancelable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSplashDialog<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">hide</span><span class="token punctuation">(</span><span class="token class-name">Activity</span> activity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mSplashDialog <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mSplashDialog<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        mSplashDialog <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>4.å®šä¹‰æš´éœ²ç»™ RN æ¡¥æ¥çš„æ–¹æ³•</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">Context</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span></span><span class="token class-name">ReactApplicationContext</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span></span><span class="token class-name">ReactContextBaseJavaModule</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span></span><span class="token class-name">ReactMethod</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ModuleHideSplash</span> <span class="token keyword">extends</span> <span class="token class-name">ReactContextBaseJavaModule</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ModuleHideSplash</span><span class="token punctuation">(</span><span class="token class-name">ReactApplicationContext</span> reactContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>reactContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
        context <span class="token operator">=</span> reactContext<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;SplashScreen&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ReactMethod</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SplashScreen</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token function">getCurrentActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ReactMethod</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SplashScreen</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token function">getCurrentActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>5.å®šä¹‰æ¡¥æ¥åŒ…ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span></span><span class="token class-name">ReactPackage</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span></span><span class="token class-name">NativeModule</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span></span><span class="token class-name">ReactApplicationContext</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>facebook<span class="token punctuation">.</span>react<span class="token punctuation">.</span>uimanager<span class="token punctuation">.</span></span><span class="token class-name">ViewManager</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPackage</span> <span class="token keyword">implements</span> <span class="token class-name">ReactPackage</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ViewManager</span><span class="token punctuation">&gt;</span></span> <span class="token function">createViewManagers</span><span class="token punctuation">(</span><span class="token class-name">ReactApplicationContext</span> reactContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">NativeModule</span><span class="token punctuation">&gt;</span></span> <span class="token function">createNativeModules</span><span class="token punctuation">(</span><span class="token class-name">ReactApplicationContext</span> reactContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">NativeModule</span><span class="token punctuation">&gt;</span></span> modules <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        modules<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ModuleHideSplash</span><span class="token punctuation">(</span>reactContext<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> modules<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>6.åˆå§‹åŒ–æ¡¥æ¥åŒ…ï¼š</p> <p>åœ¨ <code>MainApplication.java</code> ä¸­æ·»åŠ  <code>MyPackage</code>ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ReactPackage</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPackages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ReactPackage</span><span class="token punctuation">&gt;</span></span><span class="token function">asList</span><span class="token punctuation">(</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">MyPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>7.è®¾ç½®å¯åŠ¨æ—¶å±•ç¤ºï¼š</p> <p>åœ¨ <code>MainActivity.java</code> ä¸­åŠ å…¥</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">SplashScreen</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>8.RN ç«¯è°ƒç”¨</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>NativeModules<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-native&quot;</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
NativeModules<span class="token punctuation">.</span>SplashScreen<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h1 id="ç¬¬ä¸‰æ–¹æ§ä»¶æ¨è"><a href="#ç¬¬ä¸‰æ–¹æ§ä»¶æ¨è" class="header-anchor">#</a> ç¬¬ä¸‰æ–¹æ§ä»¶æ¨è</h1> <h2 id="å­—æ¯è¡¨æ§ä»¶"><a href="#å­—æ¯è¡¨æ§ä»¶" class="header-anchor">#</a> å­—æ¯è¡¨æ§ä»¶</h2> <p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/4ff5d5a6-0f98-4591-a1e2-ef32fc0e2a7a.gif" alt="5cd98b972ff0f35877.gif"></p> <p><a href="https://github.com/i6mi6/react-native-alphabetlistview" target="_blank" rel="noopener noreferrer">https://github.com/i6mi6/react-native-alphabetlistview<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="åŸç”Ÿæ¸²æŸ“å¯Œæ–‡æœ¬"><a href="#åŸç”Ÿæ¸²æŸ“å¯Œæ–‡æœ¬" class="header-anchor">#</a> åŸç”Ÿæ¸²æŸ“å¯Œæ–‡æœ¬</h2> <p><a href="https://github.com/jsdf/react-native-htmlview" target="_blank" rel="noopener noreferrer">https://github.com/jsdf/react-native-htmlview<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="è½®æ’­"><a href="#è½®æ’­" class="header-anchor">#</a> è½®æ’­</h2> <p><code>react-native-swiper</code> æˆ– <code>@nart/react-native-swiper</code>ï¼Œåè€…æ˜¯ä¿®æ­£ Android ä¸Šæ— æ³•å‚ç›´æ»šåŠ¨çš„ç‰ˆæœ¬ã€‚</p> <h2 id="æŸ¥çœ‹å¤§å›¾"><a href="#æŸ¥çœ‹å¤§å›¾" class="header-anchor">#</a> æŸ¥çœ‹å¤§å›¾</h2> <p>æ¨èç»„ä»¶ <code>react-native-image-zoom-viewer</code></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> ImageViewer <span class="token keyword">from</span> <span class="token string">&quot;react-native-image-zoom-viewer&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ImageViewer</span></span>
  <span class="token attr-name">imageUrls</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">imagePathFormat</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>contractPicture<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> url<span class="token operator">:</span> url <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">index</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>imageIndex<span class="token punctuation">}</span></span>
  <span class="token attr-name">enableImageZoom</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="å›¾ç‰‡ä¸Šä¼ ã€æ‹ç…§ã€å›¾ç‰‡å‹ç¼©"><a href="#å›¾ç‰‡ä¸Šä¼ ã€æ‹ç…§ã€å›¾ç‰‡å‹ç¼©" class="header-anchor">#</a> å›¾ç‰‡ä¸Šä¼ ã€æ‹ç…§ã€å›¾ç‰‡å‹ç¼©</h2> <p>æ¨èç»„ä»¶ <code>react-native-image-picker</code></p> <p>ä¸‹é¢ä»£ç æ˜¯æˆ‘ä»¬é¡¹ç›®ä¸­çš„ä»£ç ç‰‡æ®µï¼Œå¯ä»¥é…åˆä¸Šé¢çš„æ–‡ä»¶ä¸Šä¼ ä»£ç ä½¿ç”¨ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Alert<span class="token punctuation">,</span> Image<span class="token punctuation">,</span> TouchableOpacity<span class="token punctuation">,</span> View <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-native&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ImagePicker <span class="token keyword">from</span> <span class="token string">&quot;react-native-image-picker&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// å›¾ç‰‡é€‰æ‹©å™¨å‚æ•°è®¾ç½®</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">&quot;è¯·é€‰æ‹©å›¾ç‰‡æ¥æº&quot;</span><span class="token punctuation">,</span>
  cancelButtonTitle<span class="token operator">:</span> <span class="token string">&quot;å–æ¶ˆ&quot;</span><span class="token punctuation">,</span>
  takePhotoButtonTitle<span class="token operator">:</span> <span class="token string">&quot;æ‹ç…§&quot;</span><span class="token punctuation">,</span>
  chooseFromLibraryButtonTitle<span class="token operator">:</span> <span class="token string">&quot;ç›¸å†Œå›¾ç‰‡&quot;</span><span class="token punctuation">,</span>
  quality<span class="token operator">:</span> <span class="token number">0.7</span><span class="token punctuation">,</span>
  maxWidth<span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
  maxHeight<span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>

  <span class="token comment">// æ­¤å‚æ•°ç”¨äºç…§ç‰‡æ˜¯å¦å­˜å‚¨ç…§ç‰‡åˆ°æ‰‹æœºç›¸å†Œ</span>
  <span class="token comment">// storageOptions: {</span>
  <span class="token comment">//   skipBackup: true,</span>
  <span class="token comment">//   path: 'images'</span>
  <span class="token comment">// }</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> <span class="token punctuation">{</span>
  frame<span class="token operator">:</span> <span class="token punctuation">{</span>
    borderTopWidth<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    borderTopColor<span class="token operator">:</span> <span class="token string">&quot;#707070&quot;</span><span class="token punctuation">,</span>
    borderLeftWidth<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    borderLeftColor<span class="token operator">:</span> <span class="token string">&quot;#707070&quot;</span><span class="token punctuation">,</span>
    borderRightWidth<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    borderRightColor<span class="token operator">:</span> <span class="token string">&quot;#707070&quot;</span><span class="token punctuation">,</span>
    borderBottomWidth<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    borderBottomColor<span class="token operator">:</span> <span class="token string">&quot;#707070&quot;</span><span class="token punctuation">,</span>
    justifyContent<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
    alignItems<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
    width<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
    height<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MyImagePicker</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">selectImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ImagePicker<span class="token punctuation">.</span><span class="token function">showImagePicker</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectImageCallback</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">selectImageCallback</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>didCancel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Alert<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;æç¤º&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç”¨æˆ·å–æ¶ˆäº†é€‰æ‹©ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Alert<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;ImagePickerå‘ç”Ÿé”™è¯¯ï¼š&quot;</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token punctuation">{</span> uri<span class="token operator">:</span> response<span class="token punctuation">.</span>uri <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">// You can also display the image using data:</span>
      <span class="token comment">// let source = { uri: 'data:image/jpeg;base64,' + response.data };</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Alert<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span>
      <span class="token string">&quot;æç¤º&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;ç¡®è®¤ç§»é™¤è¿™å¼ å›¾ï¼Ÿ&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          text<span class="token operator">:</span> <span class="token string">&quot;ç¡®è®¤&quot;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">onPress</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> newFiles <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>files<span class="token punctuation">;</span>
            newFiles<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>newFiles<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">&quot;å–æ¶ˆ&quot;</span><span class="token punctuation">,</span> <span class="token function-variable function">onPress</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> style<span class="token operator">:</span> <span class="token string">&quot;cancel&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> cancelable<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> flexDirection<span class="token operator">:</span> <span class="token string">&quot;row&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TouchableOpacity</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Image</span></span>
                <span class="token attr-name">resizeMode</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;cover&quot;</span><span class="token punctuation">}</span></span>
                <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span> marginLeft<span class="token operator">:</span> index <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> marginBottom<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                <span class="token attr-name">source</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> uri<span class="token operator">:</span> file<span class="token punctuation">.</span>url <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
              <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TouchableOpacity</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TouchableOpacity</span></span> <span class="token attr-name">onPress</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>selectable <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>styles<span class="token punctuation">.</span>frame<span class="token punctuation">,</span> <span class="token punctuation">{</span> marginLeft<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">10</span> <span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Image</span></span>
                <span class="token attr-name">resizeMode</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;contain&quot;</span><span class="token punctuation">}</span></span>
                <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                <span class="token attr-name">source</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../Assets/imgs/plus.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
              <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TouchableOpacity</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br></div></div><h1 id="react-native-android-å…¨é¢å±æ‰‹æœº-åº•éƒ¨ç•™æœ‰ä¸€å¤§å—é»‘å±"><a href="#react-native-android-å…¨é¢å±æ‰‹æœº-åº•éƒ¨ç•™æœ‰ä¸€å¤§å—é»‘å±" class="header-anchor">#</a> react-native Android å…¨é¢å±æ‰‹æœº åº•éƒ¨ç•™æœ‰ä¸€å¤§å—é»‘å±</h1> <p>è§£å†³æ–¹æ¡ˆï¼šåœ¨ <code>AndroidManifest.xml</code> ä¸­ é…ç½®</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.max_aspect<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2.1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h1 id="could-not-find-com-android-tools-build-aapt2-3-2-0-alpha14-4748712"><a href="#could-not-find-com-android-tools-build-aapt2-3-2-0-alpha14-4748712" class="header-anchor">#</a> Could not find com.android.tools.build:aapt2:3.2.0-alpha14-4748712</h1> <p>åœ¨æœ€ä¸Šçº§çš„ <code>builde.gralde</code> å¢åŠ è°·æ­Œåº“ è§£å†³é—®é¢˜</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>allprojects {
    repositories {
        google()
        jcenter()
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h1 id="ä¸º-r-n-é…ç½®-typescript-å¼€å‘ç¯å¢ƒ-2"><a href="#ä¸º-r-n-é…ç½®-typescript-å¼€å‘ç¯å¢ƒ-2" class="header-anchor">#</a> ä¸º R-N é…ç½® TypeScript å¼€å‘ç¯å¢ƒ</h1> <p>typescript æ˜¯ javascript çš„è¶…é›†ï¼Œåœ¨ javascript çš„åŸºç¡€ä¸Šæ·»åŠ äº†å¯é€‰çš„é™æ€ç±»å‹ï¼Œéå¸¸é€‚åˆå›¢é˜Ÿå¼€ï¼Œè¿™æ¬¡æˆ‘ä»¬å°è¯•ä½¿ç”¨ typescript æ¥å¼€å‘ react-native åº”ç”¨ã€‚
æ­å»º react-native å¼€å‘ç¯å¢ƒ</p> <p>å®‰è£… yarn å’Œ react-native å‘½ä»¤è¡Œå·¥å…·</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g <span class="token function">yarn</span> react-native-cli
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Yarn æ˜¯ Facebook æä¾›çš„æ›¿ä»£ npm çš„å·¥å…·ï¼Œå¯ä»¥åŠ é€Ÿ node æ¨¡å—çš„ä¸‹è½½ã€‚React Native çš„å‘½ä»¤è¡Œå·¥å…·ç”¨äºæ‰§è¡Œåˆ›å»ºã€åˆå§‹åŒ–ã€æ›´æ–°é¡¹ç›®ã€è¿è¡Œæ‰“åŒ…æœåŠ¡ï¼ˆpackagerï¼‰ç­‰ä»»åŠ¡ã€‚</p> <p>React Native ç›®å‰éœ€è¦ Xcode 7.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ä½ å¯ä»¥é€šè¿‡ App Store æˆ–æ˜¯åˆ° Apple å¼€å‘è€…å®˜ç½‘ä¸Šä¸‹è½½ã€‚è¿™ä¸€æ­¥éª¤ä¼šåŒæ—¶å®‰è£… Xcode IDE å’Œ Xcode çš„å‘½ä»¤è¡Œå·¥å…·ã€‚</p> <p>è™½ç„¶ä¸€èˆ¬æ¥è¯´å‘½ä»¤è¡Œå·¥å…·éƒ½æ˜¯é»˜è®¤å®‰è£…äº†ï¼Œä½†ä½ æœ€å¥½è¿˜æ˜¯å¯åŠ¨ Xcodeï¼Œå¹¶åœ¨ Xcode | Preferences | Locations èœå•ä¸­æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦è£…æœ‰æŸä¸ªç‰ˆæœ¬çš„ Command Line Toolsã€‚Xcode çš„å‘½ä»¤è¡Œå·¥å…·ä¸­ä¹ŸåŒ…å«ä¸€äº›å¿…é¡»çš„å·¥å…·ï¼Œæ¯”å¦‚ git ç­‰ã€‚
æ­å»º typescript å¼€å‘ç¯å¢ƒ</p> <p>å…ˆå®‰è£… typescript</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g typescript
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ¥ä¸‹æ¥å®‰è£… typings
typings æ˜¯ typescript çš„ä¾èµ–ç®¡ç†å™¨ï¼Œå¦‚æœä½ ä½¿ç”¨ sublime text æˆ–è€… vscodeï¼Œä¼šéå¸¸æ–¹ä¾¿çš„è¡¥å…¨ä»£ç </p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g typings
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>typings install å®‰è£…ç¼“æ…¢ï¼šè¿½åŠ å‚æ•° <code>--registry=https://registry.npm.taobao.org</code> è§£å†³</p> <p>ä½¿ç”¨ react-native å‘½ä»¤è¡Œå·¥å…·åˆå§‹åŒ– react-native é¡¹ç›®</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>react-native init ReactNativeApp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç­‰å¾…ç‰‡åˆ»åï¼Œè¿›å…¥åˆšåˆšæ–°å»ºçš„é¡¹ç›®ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º&quot;tsconfig.json&quot; çš„æ–‡ä»¶ã€‚tsconfig.json æ˜¯ä¸€ä¸ª typescript é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡è¯»å–å®ƒæ¥è®¾ç½® ts ç¼–è¯‘å™¨çš„ç¼–è¯‘å‚æ•°
å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es6&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;allowJs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;typings/**/*.d.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.tsx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>åœ¨é¡¹ç›®ä¸‹æ–°å»ºä¸€ä¸ªç›®å½•&quot;src&quot;ï¼Œtypescripe æºä»£ç å°±æ”¾åœ¨è¿™é‡Œ</p> <p>ç°åœ¨å®‰è£… typings ä¾èµ–</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>typings <span class="token function">install</span> npm~react --save
typings <span class="token function">install</span> dt~react-native --globals --save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç¼–å†™ Hello world</p> <p>åœ¨ src ç›®å½•ä¸‹æ–°å»º myview.tsxï¼Œå†…å®¹å¦‚ä¸‹</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-native&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Hello
 */</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello world!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è¿”å›æ ¹ç›®å½•ï¼Œç¼–è¯‘åˆšåˆšå†™å¥½çš„ tsx æ–‡ä»¶</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>tsc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¿®æ”¹ index.ios.js</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Hello <span class="token keyword">from</span> <span class="token string">&quot;./dist/myview&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppRegistry<span class="token punctuation">,</span> StyleSheet<span class="token punctuation">,</span> Text<span class="token punctuation">,</span> View <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-native&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">ReactNativeApp</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">View</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hello</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">View</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> StyleSheet<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  container<span class="token operator">:</span> <span class="token punctuation">{</span>
    flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    justifyContent<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
    alignItems<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
    backgroundColor<span class="token operator">:</span> <span class="token string">&quot;#F5FCFF&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

AppRegistry<span class="token punctuation">.</span><span class="token function">registerComponent</span><span class="token punctuation">(</span><span class="token string">&quot;ReactNativeApp&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ReactNativeApp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>è¿è¡Œ run-ios è¯•è¯•æ•ˆæœ</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>react-native run-ios
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h1 id="gradle-dsl-method-not-found"><a href="#gradle-dsl-method-not-found" class="header-anchor">#</a> Gradle DSL method not found</h1> <p>é”™è¯¯æç¤ºï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>Gradle DSL method not found: <span class="token string">'compileOnly()'</span> or Gradle DSL method not found: <span class="token string">'implementation()'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è§£å†³æ–¹å¼æœ‰ä¸¤ç§ï¼š</p> <ul><li>å‡çº§ gradle ç‰ˆæœ¬</li> <li>æŠŠå¯¹åº”çš„æ–¹æ³•æ›´æ”¹æˆå½“å‰ gradle ä¸­çš„æ–¹æ³•ã€‚æ¯”å¦‚ï¼Œ<code>compileOnly()</code>å’Œ<code>implementation()</code> éƒ½å¯ä»¥æ¢æˆ<code>compile()</code></li></ul> <h1 id="å‘å¸ƒåè¿è¡Œé—ªé€€çš„é—®é¢˜"><a href="#å‘å¸ƒåè¿è¡Œé—ªé€€çš„é—®é¢˜" class="header-anchor">#</a> å‘å¸ƒåè¿è¡Œé—ªé€€çš„é—®é¢˜</h1> <p>å¤§æ¦‚ç‡æ˜¯ RN çš„åŒ…æ²¡æœ‰æ‰“è¿› APKï¼Œè¿è¡Œä¸‹é¢ä»£ç ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>react-native bundle --platform android --dev <span class="token boolean">false</span> --entry-file index.js  --bundle-output android/app/src/main/assets/index.android.bundle  --assets-dest android/app/src/main/res/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h1 active"><a href="#rn-æŠ€å·§" title="RN æŠ€å·§">RN æŠ€å·§</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#å•ç‹¬å¯åŠ¨-android-studio-æ¨¡æ‹Ÿå™¨-linux" title="å•ç‹¬å¯åŠ¨ android studio æ¨¡æ‹Ÿå™¨(Linux)">å•ç‹¬å¯åŠ¨ android studio æ¨¡æ‹Ÿå™¨(Linux)</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#æ–‡å­—è¿‡é•¿éšè—çš„é—®é¢˜" title="æ–‡å­—è¿‡é•¿éšè—çš„é—®é¢˜">æ–‡å­—è¿‡é•¿éšè—çš„é—®é¢˜</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#è·å–çª—ä½“å¤§å°" title="è·å–çª—ä½“å¤§å°">è·å–çª—ä½“å¤§å°</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#å…³äºç›¸å¯¹å•ä½" title="å…³äºç›¸å¯¹å•ä½">å…³äºç›¸å¯¹å•ä½</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#é˜´å½±æ•ˆæœ" title="é˜´å½±æ•ˆæœ">é˜´å½±æ•ˆæœ</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ç»„ä»¶é€šä¿¡" title="ç»„ä»¶é€šä¿¡">ç»„ä»¶é€šä¿¡</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ä¸Šä¼ æ–‡ä»¶" title="ä¸Šä¼ æ–‡ä»¶">ä¸Šä¼ æ–‡ä»¶</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#æ‹¨æ‰“ç”µè¯" title="æ‹¨æ‰“ç”µè¯">æ‹¨æ‰“ç”µè¯</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#å¯Œæ–‡æœ¬æ•ˆæœ" title="å¯Œæ–‡æœ¬æ•ˆæœ">å¯Œæ–‡æœ¬æ•ˆæœ</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#åœ¨ä½¿ç”¨-flatlist-ç»„ä»¶æ—¶-å¦‚æœæ•°æ®æºæ˜¯å¯¹è±¡æ—¶-æ›´æ–°æ•°æ®æºæ•°ç»„é‡ŒæŸé¡¹çš„æŸä¸ªå­—æ®µçš„å€¼æ—¶-é¡µé¢-ui-ä¸è¿›è¡Œæ›´æ–°ã€‚" title="åœ¨ä½¿ç”¨&lt;FlatList /&gt;ç»„ä»¶æ—¶ï¼Œå¦‚æœæ•°æ®æºæ˜¯å¯¹è±¡æ—¶ï¼Œæ›´æ–°æ•°æ®æºæ•°ç»„é‡ŒæŸé¡¹çš„æŸä¸ªå­—æ®µçš„å€¼æ—¶ï¼Œé¡µé¢ UI ä¸è¿›è¡Œæ›´æ–°ã€‚">åœ¨ä½¿ç”¨&lt;FlatList /&gt;ç»„ä»¶æ—¶ï¼Œå¦‚æœæ•°æ®æºæ˜¯å¯¹è±¡æ—¶ï¼Œæ›´æ–°æ•°æ®æºæ•°ç»„é‡ŒæŸé¡¹çš„æŸä¸ªå­—æ®µçš„å€¼æ—¶ï¼Œé¡µé¢ UI ä¸è¿›è¡Œæ›´æ–°ã€‚</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ios-ç³»ç»Ÿ-webview-åœ¨åº•éƒ¨æ¸²æŸ“æ„å¤–å‡ºç°é»‘è‰²è¾¹æ¡†" title="ios ç³»ç»Ÿ WebView åœ¨åº•éƒ¨æ¸²æŸ“æ„å¤–å‡ºç°é»‘è‰²è¾¹æ¡†">ios ç³»ç»Ÿ WebView åœ¨åº•éƒ¨æ¸²æŸ“æ„å¤–å‡ºç°é»‘è‰²è¾¹æ¡†</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#rn-bug" title="RN Bug">RN Bug</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#android-é”®ç›˜é¡¶èµ·åº•éƒ¨å¯¼èˆªçš„é—®é¢˜" title="Android é”®ç›˜é¡¶èµ·åº•éƒ¨å¯¼èˆªçš„é—®é¢˜">Android é”®ç›˜é¡¶èµ·åº•éƒ¨å¯¼èˆªçš„é—®é¢˜</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ios12-beta-ç‰ˆé—ªé€€" title="iOS12 beta ç‰ˆé—ªé€€">iOS12 beta ç‰ˆé—ªé€€</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#è§¦æ‘¸ç»„ä»¶åœ¨-android-å’Œ-ios-è¡¨ç°ä¸ä¸€è‡´" title="è§¦æ‘¸ç»„ä»¶åœ¨ Android å’Œ iOS è¡¨ç°ä¸ä¸€è‡´">è§¦æ‘¸ç»„ä»¶åœ¨ Android å’Œ iOS è¡¨ç°ä¸ä¸€è‡´</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#scrollview-çš„ä¸€äº›å‘" title="ScrollView çš„ä¸€äº›å‘">ScrollView çš„ä¸€äº›å‘</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#å¡«å‘-onmessage-failing-when-there-are-js-warnings-and-errors-on-the-page" title="å¡«å‘ - onMessage failing when there are JS warnings and errors on the page">å¡«å‘ - onMessage failing when there are JS warnings and errors on the page</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#borderstyle-dashed-åœ¨å®‰å“æ— æ•ˆçš„è§£å†³æ–¹æ¡ˆ" title="borderStyle: &quot;dashed&quot; åœ¨å®‰å“æ— æ•ˆçš„è§£å†³æ–¹æ¡ˆ">borderStyle: &quot;dashed&quot; åœ¨å®‰å“æ— æ•ˆçš„è§£å†³æ–¹æ¡ˆ</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#æŸäº›-rn-ç‰ˆæœ¬çš„-textinput-åœ¨-ios-ä¸Šæ— æ³•è¾“å…¥ä¸­æ–‡çš„é—®é¢˜" title="æŸäº› RN ç‰ˆæœ¬çš„ TextInput åœ¨ iOS ä¸Šæ— æ³•è¾“å…¥ä¸­æ–‡çš„é—®é¢˜">æŸäº› RN ç‰ˆæœ¬çš„ TextInput åœ¨ iOS ä¸Šæ— æ³•è¾“å…¥ä¸­æ–‡çš„é—®é¢˜</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#watch-enospc-linux" title="watch ENOSPC (linux)">watch ENOSPC (linux)</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#webview-ä¸­æ–‡æ˜¾ç¤ºä¹±ç çš„é—®é¢˜" title="WebView ä¸­æ–‡æ˜¾ç¤ºä¹±ç çš„é—®é¢˜">WebView ä¸­æ–‡æ˜¾ç¤ºä¹±ç çš„é—®é¢˜</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#android-ç¼–è¯‘æ—¶æç¤ºç¼–è¯‘å·¥å…·ç‰ˆæœ¬ä¸åŒ¹é…çš„é—®é¢˜" title="android ç¼–è¯‘æ—¶æç¤ºç¼–è¯‘å·¥å…·ç‰ˆæœ¬ä¸åŒ¹é…çš„é—®é¢˜">android ç¼–è¯‘æ—¶æç¤ºç¼–è¯‘å·¥å…·ç‰ˆæœ¬ä¸åŒ¹é…çš„é—®é¢˜</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#åœ¨-windows-ç¼–è¯‘æ—¶-js-æŠ¥é”™è¯´è·¯å¾„é—®é¢˜" title="åœ¨ windows ç¼–è¯‘æ—¶ JS æŠ¥é”™è¯´è·¯å¾„é—®é¢˜">åœ¨ windows ç¼–è¯‘æ—¶ JS æŠ¥é”™è¯´è·¯å¾„é—®é¢˜</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#fetch-å¦‚ä½•è®¾ç½®-è¯·æ±‚è¶…æ—¶" title="fetch å¦‚ä½•è®¾ç½®â€œè¯·æ±‚è¶…æ—¶â€">fetch å¦‚ä½•è®¾ç½®â€œè¯·æ±‚è¶…æ—¶â€</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#navigation-åœ¨ç™»å½•è§†å›¾çš„ç‰¹æ®Šå¤„ç†" title="navigation åœ¨ç™»å½•è§†å›¾çš„ç‰¹æ®Šå¤„ç†">navigation åœ¨ç™»å½•è§†å›¾çš„ç‰¹æ®Šå¤„ç†</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#navigation-ä½¿ç”¨ç¬”è®°" title="navigation ä½¿ç”¨ç¬”è®°">navigation ä½¿ç”¨ç¬”è®°</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#ä¸º-r-n-é…ç½®-typescript-å¼€å‘ç¯å¢ƒ" title="ä¸º R-N é…ç½® TypeScript å¼€å‘ç¯å¢ƒ">ä¸º R-N é…ç½® TypeScript å¼€å‘ç¯å¢ƒ</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#ç”¨æ•°æ®çº¿é“¾æ¥è°ƒè¯•" title="ç”¨æ•°æ®çº¿é“¾æ¥è°ƒè¯•">ç”¨æ•°æ®çº¿é“¾æ¥è°ƒè¯•</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#ç”¨-adb-æ¨¡æ‹Ÿèœå•é”®" title="ç”¨ adb æ¨¡æ‹Ÿèœå•é”®">ç”¨ adb æ¨¡æ‹Ÿèœå•é”®</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#rn-æ‰“åŒ…" title="RN æ‰“åŒ…">RN æ‰“åŒ…</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#android" title="android">android</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ä¸‹è½½-android-ä¾èµ–æ…¢" title="ä¸‹è½½ android ä¾èµ–æ…¢">ä¸‹è½½ android ä¾èµ–æ…¢</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#æ‰¾ä¸åˆ°-android-sdk" title="æ‰¾ä¸åˆ° android-sdk">æ‰¾ä¸åˆ° android-sdk</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#æ‰“åŒ…æ—¶å€™æŠ¥é”™-app-lintvitalrelease" title="æ‰“åŒ…æ—¶å€™æŠ¥é”™:app:lintVitalRelease">æ‰“åŒ…æ—¶å€™æŠ¥é”™:app:lintVitalRelease</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ndk-æ‰¾ä¸åˆ°-mipsel-mips64el" title="NDK æ‰¾ä¸åˆ° mipsel/mips64el">NDK æ‰¾ä¸åˆ° mipsel/mips64el</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#å‹ç›Ÿåˆ†äº«ã€ç¬¬ä¸‰æ–¹ç™»é™†ã€æ¨é€é›†æˆ" title="å‹ç›Ÿåˆ†äº«ã€ç¬¬ä¸‰æ–¹ç™»é™†ã€æ¨é€é›†æˆ">å‹ç›Ÿåˆ†äº«ã€ç¬¬ä¸‰æ–¹ç™»é™†ã€æ¨é€é›†æˆ</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#android-ç«¯é›†æˆ" title="Android ç«¯é›†æˆ">Android ç«¯é›†æˆ</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ios-ç«¯é›†æˆ" title="iOS ç«¯é›†æˆ">iOS ç«¯é›†æˆ</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_1ã€ä¸‹è½½ç›¸å…³-sdk" title="1ã€ä¸‹è½½ç›¸å…³ SDK">1ã€ä¸‹è½½ç›¸å…³ SDK</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2ã€é›†æˆåˆ†äº«å’Œæˆæƒç™»é™†" title="2ã€é›†æˆåˆ†äº«å’Œæˆæƒç™»é™†">2ã€é›†æˆåˆ†äº«å’Œæˆæƒç™»é™†</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_3ã€é›†æˆæ¶ˆæ¯æ¨é€" title="3ã€é›†æˆæ¶ˆæ¯æ¨é€">3ã€é›†æˆæ¶ˆæ¯æ¨é€</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#åˆ¶ä½œ-android-å¯åŠ¨é¡µ" title="åˆ¶ä½œ Android å¯åŠ¨é¡µ">åˆ¶ä½œ Android å¯åŠ¨é¡µ</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#ç¬¬ä¸‰æ–¹æ§ä»¶æ¨è" title="ç¬¬ä¸‰æ–¹æ§ä»¶æ¨è">ç¬¬ä¸‰æ–¹æ§ä»¶æ¨è</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#å­—æ¯è¡¨æ§ä»¶" title="å­—æ¯è¡¨æ§ä»¶">å­—æ¯è¡¨æ§ä»¶</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#åŸç”Ÿæ¸²æŸ“å¯Œæ–‡æœ¬" title="åŸç”Ÿæ¸²æŸ“å¯Œæ–‡æœ¬">åŸç”Ÿæ¸²æŸ“å¯Œæ–‡æœ¬</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#è½®æ’­" title="è½®æ’­">è½®æ’­</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#æŸ¥çœ‹å¤§å›¾" title="æŸ¥çœ‹å¤§å›¾">æŸ¥çœ‹å¤§å›¾</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#å›¾ç‰‡ä¸Šä¼ ã€æ‹ç…§ã€å›¾ç‰‡å‹ç¼©" title="å›¾ç‰‡ä¸Šä¼ ã€æ‹ç…§ã€å›¾ç‰‡å‹ç¼©">å›¾ç‰‡ä¸Šä¼ ã€æ‹ç…§ã€å›¾ç‰‡å‹ç¼©</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#react-native-android-å…¨é¢å±æ‰‹æœº-åº•éƒ¨ç•™æœ‰ä¸€å¤§å—é»‘å±" title="react-native Android å…¨é¢å±æ‰‹æœº åº•éƒ¨ç•™æœ‰ä¸€å¤§å—é»‘å±">react-native Android å…¨é¢å±æ‰‹æœº åº•éƒ¨ç•™æœ‰ä¸€å¤§å—é»‘å±</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#could-not-find-com-android-tools-build-aapt2-3-2-0-alpha14-4748712" title="Could not find com.android.tools.build:aapt2:3.2.0-alpha14-4748712">Could not find com.android.tools.build:aapt2:3.2.0-alpha14-4748712</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#ä¸º-r-n-é…ç½®-typescript-å¼€å‘ç¯å¢ƒ-2" title="ä¸º R-N é…ç½® TypeScript å¼€å‘ç¯å¢ƒ">ä¸º R-N é…ç½® TypeScript å¼€å‘ç¯å¢ƒ</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#gradle-dsl-method-not-found" title="Gradle DSL method not found">Gradle DSL method not found</a></div><div class="vuepress-toc-item vuepress-toc-h1"><a href="#å‘å¸ƒåè¿è¡Œé—ªé€€çš„é—®é¢˜" title="å‘å¸ƒåè¿è¡Œé—ªé€€çš„é—®é¢˜">å‘å¸ƒåè¿è¡Œé—ªé€€çš„é—®é¢˜</a></div></div> <div id="blog-adv" data-v-206924b9><iframe src="" frameborder="0" width="640" height="200" class="adv-iframe" data-v-206924b9></iframe></div></div></div> <footer class="footer" data-v-4ee6079d><div class="footer-right-wrap" data-v-4ee6079d><ul class="copyright" data-v-4ee6079d><li class="copyright-item" data-v-4ee6079d><a href="/" class="nav-link" data-v-4ee6079d>MIT Licensed | Copyright Â© 2018-present Vue.js</a></li></ul></div></footer> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1da0bb69.js" defer></script><script src="/assets/js/14.55e4c550.js" defer></script><script src="/assets/js/7.84f6b2a8.js" defer></script><script src="/assets/js/66.9784539a.js" defer></script>
  </body>
</html>
