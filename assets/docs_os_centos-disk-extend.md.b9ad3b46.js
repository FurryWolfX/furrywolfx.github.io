import{_ as s,o as a,c as n,Q as p}from"./chunks/framework.5c044c0e.js";const C=JSON.parse('{"title":"CentOS 磁盘扩容","description":"","frontmatter":{"title":"CentOS 磁盘扩容","catalog":true,"date":"2020-04-10T21:10:00.000Z","subtitle":null,"header-img":null,"tags":["Linux"],"recommend":"CentOS"},"headers":[],"relativePath":"docs/os/centos-disk-extend.md","filePath":"docs/os/centos-disk-extend.md"}'),l={name:"docs/os/centos-disk-extend.md"},o=p(`<h1 id="centos-磁盘扩容" tabindex="-1">CentOS 磁盘扩容 <a class="header-anchor" href="#centos-磁盘扩容" aria-label="Permalink to &quot;CentOS 磁盘扩容&quot;">​</a></h1><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">fdisk</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">fdisk</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>可以看到现在的分区情况如下</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Device</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Boot</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">Start</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">End</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">Blocks</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Id</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">System</span></span>
<span class="line"><span style="color:#B392F0;">/dev/sda1</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;">           </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">64</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">512000</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">83</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Linux</span></span>
<span class="line"><span style="color:#B392F0;">/dev/sda2</span><span style="color:#E1E4E8;">              </span><span style="color:#79B8FF;">64</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">1306</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">9972736</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">e</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Linux</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">LVM</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Device</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Boot</span><span style="color:#24292E;">      </span><span style="color:#032F62;">Start</span><span style="color:#24292E;">         </span><span style="color:#032F62;">End</span><span style="color:#24292E;">      </span><span style="color:#032F62;">Blocks</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Id</span><span style="color:#24292E;">  </span><span style="color:#032F62;">System</span></span>
<span class="line"><span style="color:#6F42C1;">/dev/sda1</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">*</span><span style="color:#24292E;">           </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">64</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">512000</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">83</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Linux</span></span>
<span class="line"><span style="color:#6F42C1;">/dev/sda2</span><span style="color:#24292E;">              </span><span style="color:#005CC5;">64</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">1306</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">9972736</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">e</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Linux</span><span style="color:#24292E;"> </span><span style="color:#032F62;">LVM</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>创建分区 sda3</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">fdisk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sda</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">fdisk</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/dev/sda</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">WARNING:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DOS-compatible</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mode</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deprecated.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">It</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">strongly</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">recommended</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">switch</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">off</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mode</span><span style="color:#E1E4E8;"> (command </span><span style="color:#9ECBFF;">&#39;c&#39;</span><span style="color:#E1E4E8;">) and change display units to</span></span>
<span class="line"><span style="color:#E1E4E8;">         </span><span style="color:#B392F0;">sectors</span><span style="color:#E1E4E8;"> (command </span><span style="color:#9ECBFF;">&#39;u&#39;</span><span style="color:#E1E4E8;">).</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Command</span><span style="color:#E1E4E8;"> (m </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">help</span><span style="color:#E1E4E8;">): n   </span><span style="color:#6A737D;">## 输入 n 表示创建新分区</span></span>
<span class="line"><span style="color:#B392F0;">Command</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">action</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">e</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">extended</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">p</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">primary</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">partition</span><span style="color:#E1E4E8;"> (1-4)</span></span>
<span class="line"><span style="color:#B392F0;">p</span></span>
<span class="line"><span style="color:#B392F0;">Partition</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">number</span><span style="color:#E1E4E8;"> (1-4): 3   </span><span style="color:#6A737D;">## 输入 3 表示sda3，因为前面已经有两个了</span></span>
<span class="line"><span style="color:#B392F0;">First</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cylinder</span><span style="color:#E1E4E8;"> (1306-4568, </span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1306</span><span style="color:#E1E4E8;">):     </span><span style="color:#6A737D;">## 回车，按默认值</span></span>
<span class="line"><span style="color:#B392F0;">Using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">value</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1306</span></span>
<span class="line"><span style="color:#B392F0;">Last</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cylinder,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+cylinders</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+size{K,M,G}</span><span style="color:#E1E4E8;"> (1306-4568, </span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4568</span><span style="color:#E1E4E8;">):   </span><span style="color:#6A737D;">## 回车，按默认值</span></span>
<span class="line"><span style="color:#B392F0;">Using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">value</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4568</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Command</span><span style="color:#E1E4E8;"> (m </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">help</span><span style="color:#E1E4E8;">): w     </span><span style="color:#6A737D;">## 输入 w 保存退出</span></span>
<span class="line"><span style="color:#B392F0;">The</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">partition</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">table</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">has</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">been</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">altered!</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Calling</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ioctl</span><span style="color:#E1E4E8;">() </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">re-read</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">partition</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">table.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">WARNING:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Re-reading</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">partition</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">table</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">failed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">error</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">16</span><span style="color:#9ECBFF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Device</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">resource</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">busy.</span></span>
<span class="line"><span style="color:#B392F0;">The</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kernel</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">still</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">uses</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">old</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">table.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">The</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">table</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">will</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">be</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">used</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">at</span></span>
<span class="line"><span style="color:#B392F0;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">next</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">reboot</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">after</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">partprobe</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">8</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kpartx</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">8</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#B392F0;">Syncing</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">disks.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">WARNING:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DOS-compatible</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mode</span><span style="color:#24292E;"> </span><span style="color:#032F62;">is</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deprecated.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">It</span><span style="color:#24292E;"> </span><span style="color:#032F62;">s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">strongly</span><span style="color:#24292E;"> </span><span style="color:#032F62;">recommended</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">switch</span><span style="color:#24292E;"> </span><span style="color:#032F62;">off</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mode</span><span style="color:#24292E;"> (command </span><span style="color:#032F62;">&#39;c&#39;</span><span style="color:#24292E;">) and change display units to</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6F42C1;">sectors</span><span style="color:#24292E;"> (command </span><span style="color:#032F62;">&#39;u&#39;</span><span style="color:#24292E;">).</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Command</span><span style="color:#24292E;"> (m </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">help</span><span style="color:#24292E;">): n   </span><span style="color:#6A737D;">## 输入 n 表示创建新分区</span></span>
<span class="line"><span style="color:#6F42C1;">Command</span><span style="color:#24292E;"> </span><span style="color:#032F62;">action</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">e</span><span style="color:#24292E;">   </span><span style="color:#032F62;">extended</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">p</span><span style="color:#24292E;">   </span><span style="color:#032F62;">primary</span><span style="color:#24292E;"> </span><span style="color:#032F62;">partition</span><span style="color:#24292E;"> (1-4)</span></span>
<span class="line"><span style="color:#6F42C1;">p</span></span>
<span class="line"><span style="color:#6F42C1;">Partition</span><span style="color:#24292E;"> </span><span style="color:#032F62;">number</span><span style="color:#24292E;"> (1-4): 3   </span><span style="color:#6A737D;">## 输入 3 表示sda3，因为前面已经有两个了</span></span>
<span class="line"><span style="color:#6F42C1;">First</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cylinder</span><span style="color:#24292E;"> (1306-4568, </span><span style="color:#032F62;">default</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1306</span><span style="color:#24292E;">):     </span><span style="color:#6A737D;">## 回车，按默认值</span></span>
<span class="line"><span style="color:#6F42C1;">Using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default</span><span style="color:#24292E;"> </span><span style="color:#032F62;">value</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1306</span></span>
<span class="line"><span style="color:#6F42C1;">Last</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cylinder,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+cylinders</span><span style="color:#24292E;"> </span><span style="color:#032F62;">or</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+size{K,M,G}</span><span style="color:#24292E;"> (1306-4568, </span><span style="color:#032F62;">default</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4568</span><span style="color:#24292E;">):   </span><span style="color:#6A737D;">## 回车，按默认值</span></span>
<span class="line"><span style="color:#6F42C1;">Using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default</span><span style="color:#24292E;"> </span><span style="color:#032F62;">value</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4568</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Command</span><span style="color:#24292E;"> (m </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">help</span><span style="color:#24292E;">): w     </span><span style="color:#6A737D;">## 输入 w 保存退出</span></span>
<span class="line"><span style="color:#6F42C1;">The</span><span style="color:#24292E;"> </span><span style="color:#032F62;">partition</span><span style="color:#24292E;"> </span><span style="color:#032F62;">table</span><span style="color:#24292E;"> </span><span style="color:#032F62;">has</span><span style="color:#24292E;"> </span><span style="color:#032F62;">been</span><span style="color:#24292E;"> </span><span style="color:#032F62;">altered!</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Calling</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ioctl</span><span style="color:#24292E;">() </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">re-read</span><span style="color:#24292E;"> </span><span style="color:#032F62;">partition</span><span style="color:#24292E;"> </span><span style="color:#032F62;">table.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">WARNING:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Re-reading</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">partition</span><span style="color:#24292E;"> </span><span style="color:#032F62;">table</span><span style="color:#24292E;"> </span><span style="color:#032F62;">failed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">with</span><span style="color:#24292E;"> </span><span style="color:#032F62;">error</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">16</span><span style="color:#032F62;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Device</span><span style="color:#24292E;"> </span><span style="color:#032F62;">or</span><span style="color:#24292E;"> </span><span style="color:#032F62;">resource</span><span style="color:#24292E;"> </span><span style="color:#032F62;">busy.</span></span>
<span class="line"><span style="color:#6F42C1;">The</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kernel</span><span style="color:#24292E;"> </span><span style="color:#032F62;">still</span><span style="color:#24292E;"> </span><span style="color:#032F62;">uses</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">old</span><span style="color:#24292E;"> </span><span style="color:#032F62;">table.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">The</span><span style="color:#24292E;"> </span><span style="color:#032F62;">new</span><span style="color:#24292E;"> </span><span style="color:#032F62;">table</span><span style="color:#24292E;"> </span><span style="color:#032F62;">will</span><span style="color:#24292E;"> </span><span style="color:#032F62;">be</span><span style="color:#24292E;"> </span><span style="color:#032F62;">used</span><span style="color:#24292E;"> </span><span style="color:#032F62;">at</span></span>
<span class="line"><span style="color:#6F42C1;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">next</span><span style="color:#24292E;"> </span><span style="color:#032F62;">reboot</span><span style="color:#24292E;"> </span><span style="color:#032F62;">or</span><span style="color:#24292E;"> </span><span style="color:#032F62;">after</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">partprobe</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">8</span><span style="color:#24292E;">) </span><span style="color:#032F62;">or</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kpartx</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">8</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6F42C1;">Syncing</span><span style="color:#24292E;"> </span><span style="color:#032F62;">disks.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>再次查看分区情况</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">fdisk</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">fdisk</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>可以看到现在的分区情况如下</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Device</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Boot</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">Start</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">End</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">Blocks</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Id</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">System</span></span>
<span class="line"><span style="color:#B392F0;">/dev/sda1</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;">           </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">64</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">512000</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">83</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Linux</span></span>
<span class="line"><span style="color:#B392F0;">/dev/sda2</span><span style="color:#E1E4E8;">              </span><span style="color:#79B8FF;">64</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">1306</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">9972736</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">e</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Linux</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">LVM</span></span>
<span class="line"><span style="color:#B392F0;">/dev/sda3</span><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">1306</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">4568</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">26206700</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">83</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Linux</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Device</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Boot</span><span style="color:#24292E;">      </span><span style="color:#032F62;">Start</span><span style="color:#24292E;">         </span><span style="color:#032F62;">End</span><span style="color:#24292E;">      </span><span style="color:#032F62;">Blocks</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Id</span><span style="color:#24292E;">  </span><span style="color:#032F62;">System</span></span>
<span class="line"><span style="color:#6F42C1;">/dev/sda1</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">*</span><span style="color:#24292E;">           </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">64</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">512000</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">83</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Linux</span></span>
<span class="line"><span style="color:#6F42C1;">/dev/sda2</span><span style="color:#24292E;">              </span><span style="color:#005CC5;">64</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">1306</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">9972736</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">e</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Linux</span><span style="color:#24292E;"> </span><span style="color:#032F62;">LVM</span></span>
<span class="line"><span style="color:#6F42C1;">/dev/sda3</span><span style="color:#24292E;">            </span><span style="color:#005CC5;">1306</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">4568</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">26206700</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">83</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Linux</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>重启操作系统</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">reboot</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">reboot</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>格式化新分区为 ext4</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">mkfs</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ext4</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sda3</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">mkfs</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ext4</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/dev/sda3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>将物理硬盘分区初始化为物理卷，以便被 LVM 使用，输入指令</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">lvs</span></span>
<span class="line"><span style="color:#B392F0;">pvcreate</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sda3</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">lvs</span></span>
<span class="line"><span style="color:#6F42C1;">pvcreate</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/dev/sda3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>向卷组中添加物理卷来增加卷组的容量</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">df</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">df</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vgextend</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">centos-root</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sda3</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vgextend</span><span style="color:#24292E;"> </span><span style="color:#032F62;">centos-root</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/dev/sda3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>查看可扩展的空间大小</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vgdisplay</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vgdisplay</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>其中 Free PE / Size 就是可供分配的自由空间，最多有 24.99G，在扩展时输入小于该值</p><p>扩充磁盘空间</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">lvextend</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-L+24G</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/mapper/vg_test001-lv_root</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sda3</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">lvextend</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-L+24G</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/dev/mapper/vg_test001-lv_root</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/dev/sda3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>使用 resize2fs 指令来增大或者收缩未加载的“ext”文件系统的大小</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">resize2fs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/mapper/centos-root</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">resize2fs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/dev/mapper/centos-root</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>如果是 xfs 文件系统</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">xfs_growfs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/mapper/centos-root</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">xfs_growfs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/dev/mapper/centos-root</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,29),e=[o];function c(r,t,y,E,i,F){return a(),n("div",null,e)}const b=s(l,[["render",c]]);export{C as __pageData,b as default};
