import{_ as s,o as a,c as n,Q as e}from"./chunks/framework.a5795de3.js";const b=JSON.parse('{"title":"记一个 CentOS 6 升 7","description":"","frontmatter":{"title":"记一个 CentOS 6 升 7","catalog":true,"date":"2018-05-12T21:10:00.000Z","subtitle":null,"header-img":null,"tags":["Linux"],"recommend":"CentOS"},"headers":[],"relativePath":"docs/os/centos-6-to-7.md","filePath":"docs/os/centos-6-to-7.md"}'),l={name:"docs/os/centos-6-to-7.md"},p=e(`<h1 id="记一个-centos-6-升-7" tabindex="-1">记一个 CentOS 6 升 7 <a class="header-anchor" href="#记一个-centos-6-升-7" aria-label="Permalink to &quot;记一个 CentOS 6 升 7&quot;">​</a></h1><h2 id="_1-查看下当前的系统版本" tabindex="-1">1. 查看下当前的系统版本 <a class="header-anchor" href="#_1-查看下当前的系统版本" aria-label="Permalink to &quot;1. 查看下当前的系统版本&quot;">​</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/redhat-release</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/redhat-release</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_2-配置更新源" tabindex="-1">2. 配置更新源 <a class="header-anchor" href="#_2-配置更新源" aria-label="Permalink to &quot;2. 配置更新源&quot;">​</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vi</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/yum.repos.d/upgrade.repo</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vi</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/yum.repos.d/upgrade.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-ini vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">[upgrade]</span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">=upgrade</span></span>
<span class="line"><span style="color:#F97583;">baseurl</span><span style="color:#E1E4E8;">=https://buildlogs.centos.org/centos/6/upg/x86_64/</span></span>
<span class="line"><span style="color:#F97583;">enable</span><span style="color:#E1E4E8;">=1</span></span>
<span class="line"><span style="color:#F97583;">gpgcheck</span><span style="color:#E1E4E8;">=0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">[upgrade]</span><span style="color:#D73A49;">name</span><span style="color:#24292E;">=upgrade</span></span>
<span class="line"><span style="color:#D73A49;">baseurl</span><span style="color:#24292E;">=https://buildlogs.centos.org/centos/6/upg/x86_64/</span></span>
<span class="line"><span style="color:#D73A49;">enable</span><span style="color:#24292E;">=1</span></span>
<span class="line"><span style="color:#D73A49;">gpgcheck</span><span style="color:#24292E;">=0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_3-安装更新助手" tabindex="-1">3. 安装更新助手 <a class="header-anchor" href="#_3-安装更新助手" aria-label="Permalink to &quot;3. 安装更新助手&quot;">​</a></h2><p>由于 <code>centos 6.5</code> 自带的助手之一版本较高，所以需要卸载了装个更老的：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">erase</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">openscap</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redhat-upgrade-tool</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">preupgrade-assistant-contents</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">erase</span><span style="color:#24292E;"> </span><span style="color:#032F62;">openscap</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span></span>
<span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redhat-upgrade-tool</span><span style="color:#24292E;"> </span><span style="color:#032F62;">preupgrade-assistant-contents</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_4-升级前检查潜在问题" tabindex="-1">4. 升级前检查潜在问题 <a class="header-anchor" href="#_4-升级前检查潜在问题" aria-label="Permalink to &quot;4. 升级前检查潜在问题&quot;">​</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">preupg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CentOS6_7</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">preupg</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CentOS6_7</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>在线更新,在线更新会比较慢。可以先下载好镜像，进行本地更新。</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">centos-upgrade-tool-cli</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--network</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">7</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--instrepo=https://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">centos-upgrade-tool-cli</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--network</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">7</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--instrepo=https://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_5-本地更新" tabindex="-1">5. 本地更新 <a class="header-anchor" href="#_5-本地更新" aria-label="Permalink to &quot;5. 本地更新&quot;">​</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp</span></span>
<span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">http://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-DVD-2009.iso</span></span>
<span class="line"><span style="color:#B392F0;">centos-upgrade-tool-cli</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--iso=/tmp/CentOS-7-x86_64-DVD-2009.iso</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp</span></span>
<span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">http://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-DVD-2009.iso</span></span>
<span class="line"><span style="color:#6F42C1;">centos-upgrade-tool-cli</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--iso=/tmp/CentOS-7-x86_64-DVD-2009.iso</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>如果有问题可以加 <code>--force</code> 参数，但生产环境不建议</p></div><p>设置好之后，执行重启系统, 重启系统会进入更新的操作 界面可以看到需要更新软件包，有进度条。此外有部分报错也是正常，因为版本不同软件路径也不一样 更新完成之后，进入系统界面。再次查看版本确认</p>`,17),o=[p];function t(c,r,i,d,y,u){return a(),n("div",null,o)}const E=s(l,[["render",t]]);export{b as __pageData,E as default};
