import{_ as s,o as a,c as n,V as l}from"./chunks/framework.4acca30d.js";const F=JSON.parse('{"title":"Cordova 开发日记 03：如何生成安卓 apk-release 版","description":"","frontmatter":{"title":"Cordova 开发日记 03：如何生成安卓 apk-release 版","catalog":true,"date":"2016-07-21T16:50:24.000Z","subtitle":null,"header-img":null,"tags":["JavaScript","Cordova"],"recommend":"cordova-dev-note"},"headers":[],"relativePath":"docs/frontend/hybird/cordova-dev-note-03.md","filePath":"docs/frontend/hybird/cordova-dev-note-03.md"}'),e={name:"docs/frontend/hybird/cordova-dev-note-03.md"},o=l(`<h1 id="cordova-开发日记-03-如何生成安卓-apk-release-版" tabindex="-1">Cordova 开发日记 03：如何生成安卓 apk-release 版 <a class="header-anchor" href="#cordova-开发日记-03-如何生成安卓-apk-release-版" aria-label="Permalink to &quot;Cordova 开发日记 03：如何生成安卓 apk-release 版&quot;">​</a></h1><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cordova</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">android</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">–release</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>生成以下三个文件：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">XXXX-release.apk</span><span style="color:#A6ACCD;"> (signed, </span><span style="color:#C3E88D;">aligned</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">XXXX-release-unaligned.apk</span><span style="color:#A6ACCD;"> (signed, </span><span style="color:#C3E88D;">unaligned</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">XXXX-release-unsigned.apk</span><span style="color:#A6ACCD;"> (unsigned, </span><span style="color:#C3E88D;">unaligned</span><span style="color:#A6ACCD;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>获得第一个（XXXX-release.apk） APK 文件需要进行签名。签名方法参考如下：</p><ol><li>使用 JDK 的 keytool 工具生成 keystore 文件</li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">keytool</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-genkey</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-keystore</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">lzwme-release-key.keystore</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-alias</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">lzwme</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-keyalg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">RSA</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-validity</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">365</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>按照提示输入操作。</p><ol start="2"><li>使用签名打包</li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cordova</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">android</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--release</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--keystore=./XXX.jks</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--storePassword=XXX</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--alias=XXX</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--password=XXX</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>但每次输入命令行参数是很重复的，Cordova 允许我们建立一个 <code>build.json</code> 配置文件来简化操作。文件内容如下：</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">release</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">keystore</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">release-key.keystore</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">alias</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cordova-demo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">storePassword</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">testing</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">password</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">testing2</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>下次就可以直接用 <code>cordova build --release</code> 了。</p><p>为了安全性考虑，建议不要把密码放在在配置文件或者命令行中，而是手动输入。你可以把密码相关的配置去掉，下次 build 过程中会弹出一个 Java 小窗口，提示你输入密码。</p>`,14),p=[o];function r(t,c,i,C,y,D){return a(),n("div",null,p)}const A=s(e,[["render",r]]);export{F as __pageData,A as default};
