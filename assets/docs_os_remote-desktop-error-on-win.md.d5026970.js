import{_ as e,o,c as t,Q as a}from"./chunks/framework.5c044c0e.js";const u=JSON.parse('{"title":"Windows 远程桌面报错：“由于没有远程桌面授权服务器可以提供许可证”","description":"","frontmatter":{"title":"Windows 远程桌面报错：“由于没有远程桌面授权服务器可以提供许可证”","catalog":true,"date":"2017-10-20T16:50:24.000Z","subtitle":null,"header-img":null,"tags":["Windows"]},"headers":[],"relativePath":"docs/os/remote-desktop-error-on-win.md","filePath":"docs/os/remote-desktop-error-on-win.md"}'),r={name:"docs/os/remote-desktop-error-on-win.md"},d=a('<h1 id="windows-远程桌面报错-由于没有远程桌面授权服务器可以提供许可证" tabindex="-1">Windows 远程桌面报错：“由于没有远程桌面授权服务器可以提供许可证” <a class="header-anchor" href="#windows-远程桌面报错-由于没有远程桌面授权服务器可以提供许可证" aria-label="Permalink to &quot;Windows 远程桌面报错：“由于没有远程桌面授权服务器可以提供许可证”&quot;">​</a></h1><h2 id="问题现象" tabindex="-1">问题现象 <a class="header-anchor" href="#问题现象" aria-label="Permalink to &quot;问题现象&quot;">​</a></h2><p>远程桌面客户端连接 Windows Server 服务器，输入正确的用户名和密码提交后，出现如下错误信息，无法正常远程连接：</p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/8cd63cd2-5c63-f11e-0960-fc9d9840ab55.jpg" alt="title"></p><p>管理终端 登录服务器，RD 授权诊断程序会出现如下错误信息，如图：</p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/7d1de81d-2cfa-78de-63a7-8a5795a669d8.jpg" alt="title"></p><h2 id="问题原因" tabindex="-1">问题原因 <a class="header-anchor" href="#问题原因" aria-label="Permalink to &quot;问题原因&quot;">​</a></h2><p>该问题可能有两种情况：</p><p>第一种：一般是由于在系统内部安装了远程桌面会话主机角色，此功能是 120 天免费的，超过了这个时间就要付费，会导致远程连接不上。</p><p>正常情况下，Windows Server 版服务器默认提供两个用户的免费远程桌面管理授权。如果有更高的连接需求，则需要配置远程桌面会话主机服务器角色，同时购买和配置相应的授权后，才可以使用更多的远程桌面管理并发。</p><p>另一方面，在配置远程桌面会话主机角色后，会同时取消原有默认的 2 个免费连接授权。所以，在没有正确配置相关授权的时候，会导致远程桌面无法连接，并出现上述错误提示。</p><p>第二种：该账号已经有人登录，由于终端服务配置 RDP-Tcp 限制了每个用户只能进行一个会话，所以其他会话无法建立。</p><h2 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-label="Permalink to &quot;解决方案&quot;">​</a></h2><p>安装远程桌面会话主机导致的无法远程的解决办法有二种：</p><p>第一种：在配置远程桌面会话主机服务器后，在微软官网购买和配置相应的证书授权（相关操作方法可以参阅如下知识点提到的微软官方文档）；</p><p>ECS Windows Server 的远程桌面连接数以及远程桌面授权服务器的说明</p><p>第二种：删除远程桌面会话主机角色，使用默认的 2 个免费连接授权。</p><h3 id="windows-2003-系统操作方法" tabindex="-1">Windows 2003 系统操作方法 <a class="header-anchor" href="#windows-2003-系统操作方法" aria-label="Permalink to &quot;Windows 2003 系统操作方法&quot;">​</a></h3><p>鼠标左键依次选择开始 - 控制面板 - 添加或者删除程序 - 添加 / 删除 Windows 组件去掉终端服务器前面的 √，然后下一步。</p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/d1976f77-d760-e7c4-e912-479b3009db5c.jpg" alt="title"></p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/cf434292-5fd2-0b97-0608-7058c47e7bcf.jpg" alt="title"></p><h3 id="windows-2008-系统操作方法" tabindex="-1">Windows 2008 系统操作方法 <a class="header-anchor" href="#windows-2008-系统操作方法" aria-label="Permalink to &quot;Windows 2008 系统操作方法&quot;">​</a></h3><p>鼠标左键依次开始 - 控制面板 - 管理工具 - 服务器管理器 - 鼠标左键单击远程桌面服务 - 右键删除角色服务。</p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/47af4788-0284-fd28-d19a-c43da88f94ac.jpg" alt="title"></p><p>在弹出的删除角色服务窗口中将远程桌面会话主机前的勾去除，下一步直到完成。</p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/a714df38-4b53-ef00-458b-5ed50f7d7995.jpg" alt="title"></p><h3 id="windows-2012-系统操作方法" tabindex="-1">Windows 2012 系统操作方法 <a class="header-anchor" href="#windows-2012-系统操作方法" aria-label="Permalink to &quot;Windows 2012 系统操作方法&quot;">​</a></h3><p>1). 服务器管理器 - 单击右上角的管理 - 删除角色按钮；</p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/0a51970f-f6c1-15e1-cd24-d34f287dacf6.jpg" alt="title"></p><p>2). 在向导第二步，取消勾选远程桌面服务，其它默认配置即可。</p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/1cc54876-d082-0d90-05d0-094598bf9e13.jpg" alt="title"></p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/d9f63688-a514-632d-63e5-68e5b7c32ddc.jpg" alt="title"></p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/ec91ce06-bb51-7f55-9fc5-2dcfd5d37aeb.jpg" alt="title"></p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/5a35e304-1043-f5c2-0593-d21971d8d07f.jpg" alt="title"></p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/aa237a71-1294-e36a-d511-ffdcc44d2982.jpg" alt="title"></p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/ba3ba79a-6bc4-0654-8e82-0d6bf1ff16e3.jpg" alt="title"></p><p>注意： 操作完成后需要重启服务器生效。</p><p>RDP-Tcp 限制了每个用户只能进行一个会话的解决办法：</p><p>依次打开控制面板 - 管理工具 - 远程桌面服务 - 远程桌面会话主机配置，将选项限制每个用户只能进行一个会话设置为否，重新连接即可。</p><p><img src="https://imgs-1251264059.cos.ap-chengdu.myqcloud.com/remote-desktop-error-on-win/6f7316aa-f075-2477-3ecc-ad3260e3b033.jpg" alt="title"></p>',40),s=[d];function p(c,i,n,m,l,h){return o(),t("div",null,s)}const w=e(r,[["render",p]]);export{u as __pageData,w as default};
