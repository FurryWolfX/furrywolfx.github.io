import{_ as s,o as a,c as n,X as e}from"./chunks/framework.405fef80.js";const h=JSON.parse('{"title":"记一个 CentOS 6 升 7","description":"","frontmatter":{"title":"记一个 CentOS 6 升 7","catalog":true,"date":"2018-05-12T21:10:00.000Z","subtitle":null,"header-img":null,"tags":["Linux"],"recommend":"CentOS"},"headers":[],"relativePath":"docs/os/centos-6-to-7.md","filePath":"docs/os/centos-6-to-7.md"}'),l={name:"docs/os/centos-6-to-7.md"},p=e(`<h1 id="记一个-centos-6-升-7" tabindex="-1">记一个 CentOS 6 升 7 <a class="header-anchor" href="#记一个-centos-6-升-7" aria-label="Permalink to &quot;记一个 CentOS 6 升 7&quot;">​</a></h1><h2 id="_1-查看下当前的系统版本" tabindex="-1">1. 查看下当前的系统版本 <a class="header-anchor" href="#_1-查看下当前的系统版本" aria-label="Permalink to &quot;1. 查看下当前的系统版本&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/redhat-release</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_2-配置更新源" tabindex="-1">2. 配置更新源 <a class="header-anchor" href="#_2-配置更新源" aria-label="Permalink to &quot;2. 配置更新源&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d/upgrade.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-ini line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[upgrade]</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">upgrade</span></span>
<span class="line"><span style="color:#F07178;">baseurl</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">https://buildlogs.centos.org/centos/6/upg/x86_64/</span></span>
<span class="line"><span style="color:#F07178;">enable</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">1</span></span>
<span class="line"><span style="color:#F07178;">gpgcheck</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_3-安装更新助手" tabindex="-1">3. 安装更新助手 <a class="header-anchor" href="#_3-安装更新助手" aria-label="Permalink to &quot;3. 安装更新助手&quot;">​</a></h2><p>由于 <code>centos 6.5</code> 自带的助手之一版本较高，所以需要卸载了装个更老的：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">erase</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openscap</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redhat-upgrade-tool</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">preupgrade-assistant-contents</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_4-升级前检查潜在问题" tabindex="-1">4. 升级前检查潜在问题 <a class="header-anchor" href="#_4-升级前检查潜在问题" aria-label="Permalink to &quot;4. 升级前检查潜在问题&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">preupg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">CentOS6_7</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>在线更新,在线更新会比较慢。可以先下载好镜像，进行本地更新。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">centos-upgrade-tool-cli</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--network</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--instrepo=https://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_5-本地更新" tabindex="-1">5. 本地更新 <a class="header-anchor" href="#_5-本地更新" aria-label="Permalink to &quot;5. 本地更新&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/tmp</span></span>
<span class="line"><span style="color:#FFCB6B;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-DVD-2009.iso</span></span>
<span class="line"><span style="color:#FFCB6B;">centos-upgrade-tool-cli</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--iso=/tmp/CentOS-7-x86_64-DVD-2009.iso</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>如果有问题可以加 <code>--force</code> 参数，但生产环境不建议</p></div><p>设置好之后，执行重启系统, 重启系统会进入更新的操作 界面可以看到需要更新软件包，有进度条。此外有部分报错也是正常，因为版本不同软件路径也不一样 更新完成之后，进入系统界面。再次查看版本确认</p>`,17),o=[p];function t(r,c,i,d,u,C){return a(),n("div",null,o)}const m=s(l,[["render",t]]);export{h as __pageData,m as default};
