(window.webpackJsonp=window.webpackJsonp||[]).push([[198],{450:function(s,e,n){"use strict";n.r(e);var t=n(5),a=Object(t.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("Redis 默认只允许本地访问，要使 Redis 可以远程访问可以修改 "),n("code",[s._v("/etc/redis/redis.conf")])]),s._v(" "),n("p",[s._v("打开 redis.conf 文件在 NETWORK 部分有说明")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################## NETWORK #####################################")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# By default, if no "bind" configuration directive is specified, Redis listens')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for connections from all the network interfaces available on the server.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# It is possible to listen to just one or multiple selected interfaces using")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# the "bind" configuration directive, followed by one or more IP addresses.')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Examples:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bind 192.168.1.100 10.0.0.1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bind 127.0.0.1 ::1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ~~~ WARNING ~~~ If the computer running Redis is directly exposed to the")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# internet, binding to all the interfaces is dangerous and will expose the")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# instance to everybody on the internet. So by default we uncomment the")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# following bind directive, that will force Redis to listen only into")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the IPv4 lookback interface address (this means Redis will be able to")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# accept connections only from clients running into the same computer it")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# is running).")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# JUST COMMENT THE FOLLOWING LINE.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[s._v("解决办法：注释掉 bind 127.0.0.1 可以使所有的 ip 访问 redis\n若是想指定多个 ip 访问，但并不是全部的 ip 访问，可以 bind")]),s._v(" "),n("p",[s._v("注意\n下面还有个说明")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Protected mode is a layer of security protection, in order to avoid that")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis instances left open on the internet are accessed and exploited.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# When protected mode is on and if:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1) The server is not binding explicitly to a set of addresses using the")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    "bind" directive.')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2) No password is configured.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The server only accepts connections from clients connecting from the")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sockets.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# By default protected mode is enabled. You should disable it only if")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# you are sure you want clients from other hosts to connect to Redis")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# even if no authentication is configured, nor a specific set of interfaces")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# are explicitly listed using the "bind" directive.')]),s._v("\nprotected-mode "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("在 redis3.2 之后，redis 增加了 "),n("code",[s._v("protected-mode")]),s._v("，在这个模式下，即使注释掉了 "),n("code",[s._v("bind 127.0.0.1")]),s._v("，再访问 redisd 时候还是报错，如下")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" DENIED Redis is running "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" protected mode because protected mode is enabled, no "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the loopback interface. If you want to connect from external computers to Redis you may adopt one of the following solutions: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" Just disable protected mode sending the "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CONFIG SET protected-mode no'")]),s._v(" from the loopback interface by connecting to Redis from the same "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" the server is running, however MAKE SURE Redis is not publicly accessible from internet "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" you "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" so. Use CONFIG REWRITE to "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" this change permanent. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" Alternatively you can just disable the protected mode by editing the Redis configuration file, and setting the protected mode option to "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'no'")]),s._v(", and "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" restarting the server. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" If you started the server manually just "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" testing, restart it with the "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'--protected-mode no'")]),s._v(" option. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" Setup a "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" address or an authentication password. NOTE: You only need to "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" one of the above things "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" order "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the server to start accepting connections from the outside.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("修改办法："),n("code",[s._v("protected-mode no")])])])}),[],!1,null,null,null);e.default=a.exports}}]);