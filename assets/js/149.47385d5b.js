(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{401:function(s,a,t){"use strict";t.r(a);var e=t(5),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v("本来一直用的 ArchLinux，不过 Arch 其实不适合作为服务器使用，因为其滚动更新的特性使得服务器不稳定。")])]),s._v(" "),t("h1",{attrs:{id:"centos-如何安装最新版本的-gcc-编译器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos-如何安装最新版本的-gcc-编译器"}},[s._v("#")]),s._v(" CentOS 如何安装最新版本的 GCC 编译器")]),s._v(" "),t("p",[s._v("默认没做任何设置的情况下，yum 安装的 GCC 版本比较陈旧。如果想安装较新的版本，需要如下操作：")]),s._v(" "),t("h2",{attrs:{id:"gcc-4-9-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gcc-4-9-安装"}},[s._v("#")]),s._v(" GCC 4.9 安装")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" centos-release-scl -y\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" devtoolset-3-toolchain -y\nscl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" devtoolset-3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\ngcc -v\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"gcc-5-2-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gcc-5-2-安装"}},[s._v("#")]),s._v(" GCC 5.2 安装")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" centos-release-scl -y\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" devtoolset-4-toolchain -y\nscl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" devtoolset-4 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\ngcc --version\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h1",{attrs:{id:"centos7-安装完毕后无法联网的解决方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos7-安装完毕后无法联网的解决方法"}},[s._v("#")]),s._v(" Centos7 安装完毕后无法联网的解决方法")]),s._v(" "),t("p",[s._v("进入目录：")]),s._v(" "),t("p",[t("code",[s._v("/etc/sysconfig/network-scripts/")])]),s._v(" "),t("p",[s._v("ls 命令查看网卡配置文件名（在 CENTOS7 中网卡名貌似变成了随机数字，所以每台机器的网卡名并不相同）")]),s._v(" "),t("p",[s._v("比如："),t("code",[s._v("ifcfg-enoxxxxxx")])]),s._v(" "),t("p",[s._v("将最后一行的 ONBOOT=no 改为 ONBOOT=yes, 如图\n最后输入：wq 保存并退出，再重启一下 network：")]),s._v(" "),t("p",[t("code",[s._v("service network restart")])]),s._v(" "),t("h1",{attrs:{id:"如何增加桌面环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何增加桌面环境"}},[s._v("#")]),s._v(" 如何增加桌面环境")]),s._v(" "),t("p",[s._v("KDE")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum groupinstall "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KDE Plasma Workspaces"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("GNOME")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum groupinstall "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GNOME Desktop"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("启动（基于 systemd)")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl get-default\nsystemctl set-default graphical.target\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h1",{attrs:{id:"yum-和-rpm-常用命令备忘录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yum-和-rpm-常用命令备忘录"}},[s._v("#")]),s._v(" Yum 和 RPM 常用命令备忘录")]),s._v(" "),t("p",[s._v("yum history")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" list "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ID"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" info "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ID"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" undo "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ID"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" redo "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ID"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("yum update")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum clean all\nyum makecache\nyum update\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("rpm 安装卸载")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh *.rpm\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" *\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e *\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e * --nodeps\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h1",{attrs:{id:"如何从-yum-库下载-rpm-包但不安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何从-yum-库下载-rpm-包但不安装"}},[s._v("#")]),s._v(" 如何从 Yum 库下载 rpm 包但不安装")]),s._v(" "),t("h2",{attrs:{id:"方法一-yum"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法一-yum"}},[s._v("#")]),s._v(" 方法一：yum")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --downloadonly "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("默认情况下，一个下载的 RPM 包会保存在下面的目录中：\n"),t("code",[s._v("/var/cache/yum/x86_64/[centos/fedora-version]/[repository]/packages")]),s._v("\n以上的 "),t("code",[s._v("[repository]")]),s._v(" 表示下载包的来源仓库的名称（例如：base、fedora、updates)")]),s._v(" "),t("p",[s._v("如果你想要将一个包下载到一个指定的目录（如 /tmp)：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --downloadonly --downloaddir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("注意，如果下载的包包含了任何没有满足的依赖关系，yum 将会把所有的依赖关系包下载，但是都不会被安装。\n另外一个重要的事情是，在 "),t("code",[s._v("CentOS/RHEL 6")]),s._v(" 或更早期的版本中，你需要安装一个单独 yum 插件（名称为 "),t("code",[s._v("yum-plugin-downloadonly")]),s._v(") 才能使用 "),t("code",[s._v("--downloadonly")]),s._v(" 命令选项：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" yum-plugin-downloadonly\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果没有该插件，你会在使用 yum 时得到以下错误：")]),s._v(" "),t("p",[t("code",[s._v("Command line error: no such option: --downloadonly")])]),s._v(" "),t("h2",{attrs:{id:"方法二-yumdownloader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法二-yumdownloader"}},[s._v("#")]),s._v(" 方法二：Yumdownloader")]),s._v(" "),t("p",[s._v("另外一个下载 RPM 包的方法就是通过一个专门的包下载工具 --yumdownloader。 这个工具是 yum 工具包（包含了用来进行 yum 包管理的帮助工具套件) 的子集。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" yum-utils\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("下载一个 RPM 包：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yumdownloader "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("下载的包会被保存在当前目录中。你需要使用 root 权限，因为 yumdownloader 会在下载过程中更新包索引文件。与 yum 命令不同的是，任何依赖包不会被下载。")]),s._v(" "),t("p",[s._v("下载 lsof 示例：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yumdownloader "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v(" --resolve --destdir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/mydepot/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("--resolve")]),s._v(" 表示为下载依赖")]),s._v(" "),t("h1",{attrs:{id:"centos-samba-服务器配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos-samba-服务器配置"}},[s._v("#")]),s._v(" CentOS Samba 服务器配置")]),s._v(" "),t("p",[s._v("Samba 是 SMB 的一种实现方法，主要用来实现 Linux 系统的文件和打印服务。Linux 用户通过配置使用 Samba 服务器可以实现与 Windows 用户的资源共享。守护进程 smbd 和 nmbd 是 Samba 的核心，在全部时间内运行。nmbd 程序使得通过企图计算机可以浏览 Linux 服务器。")]),s._v(" "),t("h2",{attrs:{id:"一、安装前准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、安装前准备"}},[s._v("#")]),s._v(" 一、安装前准备")]),s._v(" "),t("p",[s._v("1、 使用 Samba 服务器需要防火墙开放以下端口")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("UDP "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("137")]),s._v(" UDP "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("138")]),s._v(" TCP "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("139")]),s._v(" TCP "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("445")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置防火墙端口")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/sysconfig/iptables\n\n-A INPUT -m state --state NEW -m tcp -p tcp --dport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("139")]),s._v(" -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("445")]),s._v(" -j ACCEPT\n-A INPUT -m state --state NEW -m udp -p udp --dport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("137")]),s._v(" -j ACCEPT\n-A INPUT -m state --state NEW -m udp -p udp --dport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("138")]),s._v(" -j ACCEPT\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启防火墙，使规则生效")]),s._v("\n/etc/rc.d/init.d/iptables restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("2、关闭 CentOS6 系统的 SELinux")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/selinux/config\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SELINUX=enforcing     #注释掉")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SELINUXTYPE=targeted  #注释掉")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SELINUX")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("disabled       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#增加")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# :wq  保存。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启系统")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" -r now  或者 init "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"二、安装-samba"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、安装-samba"}},[s._v("#")]),s._v(" 二、安装 Samba")]),s._v(" "),t("p",[s._v("1 、检查 Samba 服务包是否已安装")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" samba\n    samba-3.5.4-68.el6.x86_64\n    samba-common-3.5.4-68.el6.x86_64\n    samba-client-3.5.4-68.el6.x86_64\n    samba4-libs-4.0.0-23.alpha11.el6.x86_64\n    samba-winbind-clients-3.5.4-68.el6.x86_64\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("说明 samba 已经安装，如果没有安装，运行下面命令安装")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ www ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" samba\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("2、配置 samba")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" smb on  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 Samba 开机自动启动")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" smb start       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 Samba 服务")]),s._v("\n/etc/init.d/smb restart  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启")]),s._v("\n/etc/init.d/smb stop     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/samba/smb.conf   /etc/samba/bak_smb.conf_bak   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/samba/bak_smb.conf_bak  /etc/samba/smb.conf   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 恢复")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/samba/smb.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("global"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 找到这一行（全局设置标签），在此行下面添加如下行：")]),s._v("\nworkgroup "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" WORKGROUP          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 工作组名称改为 Windows 网络所定义的工作组名")]),s._v("\nserver string "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Samba Server   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 samba 服务器的主机名称")]),s._v("\nsecurity "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" user                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 samba 服务器安全级别为 user，即以账号和口令访问")]),s._v("\nnetbios name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" SambaServer     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 Samba 服务器访问别名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在配置文件的末尾添加以下自定义内容")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("SambaServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在 Windows 网上邻居中看到的共享目录的名字")]),s._v("\n    comment "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" SambaServer          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在 Windows 网上邻居中看到的共享目录的备注信息")]),s._v("\n    path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /home/SambaServer       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 共享目录在系统中的位置")]),s._v("\n    public "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" no                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不公开目录")]),s._v("\n    writable "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 共享目录可以读写")]),s._v("\n    valid "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("users")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("SambaServer        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只允许 SambaServer 用户访问")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存配置")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("3、添加访问 linux 共享目录的账号 SambaServer")]),s._v(" "),t("p",[s._v("用户家目录为 /home/SambaServer, 用户登录终端设为 /bin/false（即使之不能登录系统)")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /home/SambaServer "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#建立 SambaServer 文件夹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/SambaServer\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v("  samba.txt    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建测试文件 samba.txt")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" SambaServer -d /home/SambaServer -s /bin/false\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" SambaServer:SambaServer /home/SambaServer -R\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("4、将用户 SambaServer 添加入到 Samba 用户数据库，并设置登录共享目录的密码为：123456")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("smbpasswd -a SambaServer\n   New SMB password: "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入该用户用于登录 Samba 的密码")]),s._v("\n   Retype new SMB password: "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 再次确认输入该密码")]),s._v("\n   Added user SambaServer.\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备注：这里设置的密码是 SambaServer 用户登录该机的 Samba 共享的密码，非登陆 OS 的密码；")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("5、重启 Samba 服务器")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("/etc/init.d/smb restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("6、浏览共享信息\n在 Windows 客户端输入 "),t("code",[s._v("\\\\ip")]),s._v(" 或者 "),t("code",[s._v("\\\\SambaServer")]),s._v(" 服务器别名")]),s._v(" "),t("p",[s._v("回车之后，会跳出来登录框，输入账号 SambaServer , 密码 123456 , 即可访问共享目录")]),s._v(" "),t("p",[s._v("至此，CentOS 6 linux samba 服务器配置完成。")]),s._v(" "),t("p",[s._v("服务名：smb\n配置目录："),t("code",[s._v("/etc/sabma/")]),s._v("\n主配置文件："),t("code",[s._v("/etc/sabma/smb.conf")])]),s._v(" "),t("p",[s._v("问题：\n如果无法访问共享目录的内容，请把防火墙停止；")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" iptables stop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h1",{attrs:{id:"「rpm」error-in-preun-scriptlet-file-was-supposed-to-be-removed-but-is-not"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#「rpm」error-in-preun-scriptlet-file-was-supposed-to-be-removed-but-is-not"}},[s._v("#")]),s._v(" 「RPM」Error in PREUN scriptlet … file was supposed to be removed but is not")]),s._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"http://www.linux-pages.com/2012/08/error-in-preun-scriptlet-file-was-supposed-to-be-removed-but-is-not/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://www.linux-pages.com/2012/08/error-in-preun-scriptlet-file-was-supposed-to-be-removed-but-is-not/"),t("OutboundLink")],1)])]),s._v(" "),t("p",[s._v("Sometimes a yum/RPM package would get “stuck” and just won’t go away. Actually usually the package is already gone but yum/rpm fails to update it’s internal DB and still thinks it is there.")]),s._v(" "),t("p",[s._v("The error one usually sees in such cases is something like:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Error "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" PREUN scriptlet "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" package stlinux23-sh4_uclibc-which\nstlinux23-sh4_uclibc-which-2.16-5.sh4_uclibc was supposed to be removed but is not"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("So in my case the package stlinux23-sh4_uclibc-which-2.16-5.sh4_uclibc is causing problems, it will be soemthing different in your case")]),s._v(" "),t("p",[s._v("To fix the problem run:")]),s._v(" "),t("p",[t("code",[s._v("yum --setopt=tsflags=noscripts remove stlinux23-sh4_uclibc-which.sh4_uclibc")])]),s._v(" "),t("p",[s._v("You can add more than one package file to the end of the command.")]),s._v(" "),t("h1",{attrs:{id:"「java」org-quartz-schedulerexception-couldn-t-get-host-name"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#「java」org-quartz-schedulerexception-couldn-t-get-host-name"}},[s._v("#")]),s._v(" 「Java」org.quartz.SchedulerException: Couldn't get host name!")]),s._v(" "),t("blockquote",[t("p",[s._v("<https://blog.csdn.net/Lumia10200/article/details/52670231 >")])]),s._v(" "),t("p",[s._v("使用 quartz 做集群任务的时候，在本地和测试环境正常，部署上线的时候， 启动异常：org.quartz.SchedulerException: Couldn't get host name!")]),s._v(" "),t("p",[s._v("这个是 org.quartz.simpl.SimpleInstanceIdGenerator 中获取主机名异常了")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SimpleInstanceIdGenerator")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InstanceIdGenerator")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("generateInstanceId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SchedulerException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InetAddress")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getLocalHost")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHostName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SchedulerException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Couldn\'t get host name!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("处理方法:")]),s._v(" "),t("p",[s._v("进入线上环境(centOs6.x):")]),s._v(" "),t("p",[s._v("1, 查看主机名(命令) : hostname")]),s._v(" "),t("p",[s._v("2, 打开 hosts 文件: "),t("code",[s._v("vi /etc/hosts")]),s._v(" 查看是否有乱码等异常内容")]),s._v(" "),t("p",[s._v("3, 确保有: 127.0.0.1 后跟上面用 hostname 命令查看到的主机名， 如果没有则加上")]),s._v(" "),t("p",[s._v("如 : hostname -> USER-1234")]),s._v(" "),t("p",[s._v("则: 127.0.0.1 USER-1234")]),s._v(" "),t("p",[s._v("程序正常， 定时任务正常")])])}),[],!1,null,null,null);a.default=n.exports}}]);