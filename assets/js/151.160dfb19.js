(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{403:function(s,a,n){"use strict";n.r(a);var e=n(5),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" -l\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("可以看到现在的分区情况如下")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *           "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("512000")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v("  Linux\n/dev/sda2              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1306")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9972736")]),s._v("   8e  Linux LVM\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("创建分区 sda3")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" /dev/sda\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("WARNING: DOS-compatible mode is deprecated. It s strongly recommended to\n         switch off the mode "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("command "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'c'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" and change display "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("units")]),s._v(" to\n         sectors "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("command "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'u'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n\nCommand "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入 n 表示创建新分区")]),s._v("\nCommand action\n   e   extended\n   p   primary partition "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("-4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\np\nPartition number "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("-4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入 3 表示sda3，因为前面已经有两个了")]),s._v("\nFirst cylinder "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1306")]),s._v("-4568, default "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1306")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 回车，按默认值")]),s._v("\nUsing default value "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1306")]),s._v("\nLast cylinder, +cylinders or +size"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("K,M,G"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1306")]),s._v("-4568, default "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4568")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 回车，按默认值")]),s._v("\nUsing default value "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4568")]),s._v("\n\nCommand "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": w     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入 w 保存退出")]),s._v("\nThe partition table has been altered"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n\nCalling ioctl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to re-read partition table.\n\nWARNING: Re-reading the partition table failed with error "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(": Device or resource busy.\nThe kernel still uses the old table. The new table will be used at\nthe next "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v(" or after you run partprobe"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or kpartx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nSyncing disks.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[s._v("再次查看分区情况")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" -l\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("可以看到现在的分区情况如下")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *           "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("512000")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v("  Linux\n/dev/sda2              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1306")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9972736")]),s._v("   8e  Linux LVM\n/dev/sda3            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1306")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4568")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26206700")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v("  Linux\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("重启操作系统")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("格式化新分区为 ext4")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkfs")]),s._v(" -t ext4 /dev/sda3\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("将物理硬盘分区初始化为物理卷，以便被 LVM 使用，输入指令")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("lvs\npvcreate /dev/sda3\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("向卷组中添加物理卷来增加卷组的容量")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" -h\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("vgextend centos-root /dev/sda3\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("查看可扩展的空间大小")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("vgdisplay\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("其中 Free PE / Size 就是可供分配的自由空间，最多有 24.99G，在扩展时输入小于该值")]),s._v(" "),n("p",[s._v("扩充磁盘空间")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("lvextend -L+24G /dev/mapper/vg_test001-lv_root /dev/sda3\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("使用 resize2fs 指令来增大或者收缩未加载的“ext”文件系统的大小")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("resize2fs /dev/mapper/centos-root\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如果是 xfs 文件系统")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("xfs_growfs /dev/mapper/centos-root\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);