import{_ as s,o as a,c as n,X as l}from"./chunks/framework.405fef80.js";const d=JSON.parse('{"title":"Linux VPN Server 异地组网","description":"","frontmatter":{"title":"Linux VPN Server 异地组网","catalog":true,"date":"2020-01-05T21:10:00.000Z","subtitle":null,"header-img":null,"tags":["Linux"]},"headers":[],"relativePath":"docs/os/linux-vpn.md","filePath":"docs/os/linux-vpn.md"}'),p={name:"docs/os/linux-vpn.md"},o=l(`<h1 id="linux-vpn-server-异地组网" tabindex="-1">Linux VPN Server 异地组网 <a class="header-anchor" href="#linux-vpn-server-异地组网" aria-label="Permalink to &quot;Linux VPN Server 异地组网&quot;">​</a></h1><div class="info custom-block"><p class="custom-block-title">INFO</p><p>虚拟专用网（VPN），是一种常用于连接中、大型企业或团体与团体间的私人网络的通讯方法。虚拟私人网络的讯息透过公用的网络架构来传送内联网的网络讯息。它利用已加密的通道协议来达到保密、发送端认证、消息准确性等私人消息安全效果。这种技术可以用不安全的网络来发送可靠、安全的消息。</p></div><h2 id="docker-版安装" tabindex="-1">docker 版安装 <a class="header-anchor" href="#docker-版安装" aria-label="Permalink to &quot;docker 版安装&quot;">​</a></h2><p><a href="https://hub.docker.com/r/siomiz/softethervpn" target="_blank" rel="noreferrer">https://hub.docker.com/r/siomiz/softethervpn</a></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--cap-add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">NET_ADMIN</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">500</span><span style="color:#C3E88D;">:500/udp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4500</span><span style="color:#C3E88D;">:4500/udp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1701</span><span style="color:#C3E88D;">:1701/tcp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1194</span><span style="color:#C3E88D;">:1194/udp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5555</span><span style="color:#C3E88D;">:5555/tcp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">PSK=共享密码</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">USERNAME=用户名</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">PASSWORD=密码</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">siomiz/softethervpn</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="常规安装并启动" tabindex="-1">常规安装并启动 <a class="header-anchor" href="#常规安装并启动" aria-label="Permalink to &quot;常规安装并启动&quot;">​</a></h2><p>在 softether 官网下载 Linux Server 版压缩包。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">tar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zxvf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./xxx.tar.gz</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>安装编译需要的依赖</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">make</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cmake</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gcc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gcc-c++</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gcc-g77</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">flex</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bison</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">file</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libtool</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libtool-libs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">autoconf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kernel-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">patch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">crontabs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libjpeg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libjpeg-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libpng</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libpng-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libpng10</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libpng10-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gd-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libxml2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libxml2-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zlib</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zlib-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">glib2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">glib2-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bzip2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bzip2-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libevent</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libevent-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ncurses</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ncurses-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">curl-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libcurl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libcurl-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">e2fsprogs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">e2fsprogs-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">krb5</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">krb5-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libidn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libidn-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openssl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openssl-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vim-minimal</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gettext</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gettext-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ncurses-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gmp-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pspell-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libcap</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">diffutils</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ca-certificates</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">net-tools</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libc-client-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">psmisc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libXpm-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">git-core</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">c-ares-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libicu-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libxslt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libxslt-devel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xz</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">expat-devel</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">make</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>一路 yes 之后，会生成 <code>vpnserver</code> 的可执行文件。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">./vpnserver</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">#开启服务</span></span>
<span class="line"><span style="color:#FFCB6B;">./vpnserver</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;">#关闭服务</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="设置远程管理密码" tabindex="-1">设置远程管理密码 <a class="header-anchor" href="#设置远程管理密码" aria-label="Permalink to &quot;设置远程管理密码&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">./vpncmd</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>进入交互环境后，用 <code>ServerPasswordSet</code> 设置密码。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">VPN</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Serve</span><span style="color:#A6ACCD;">r</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">ServerPasswordSet</span></span>
<span class="line"><span style="color:#FFCB6B;">ServerPasswordSet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">command</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">VPN</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Administrator</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Password</span></span>
<span class="line"><span style="color:#FFCB6B;">Please</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password.</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">To</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cancel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">press</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Ctrl+D</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Password:</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">****************</span></span>
<span class="line"><span style="color:#FFCB6B;">Confirm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">input:</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">****************</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">The</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">command</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">completed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">successfully.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>然后可以通过远程配置工具进行图形化配置了。</p>`,18),e=[o];function r(t,c,C,y,A,D){return a(),n("div",null,e)}const E=s(p,[["render",r]]);export{d as __pageData,E as default};
